"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[3512],{3512:(a,e,t)=>{t.r(e),t.d(e,{default:()=>n});var l=t(28915),i=t(51588),o=t(47185),_=t(81801),u=t(76812),s=t(48058),p=t(4440),r=t(24978),d=t(68179);const n=()=>{const{t:a}=(0,i.B)("translation",{keyPrefix:"admin.settings_users"}),e=(0,o.dj)(),{updateUsers:t}=(0,r.Ty)(),n={title:a("title"),properties:{default_avatar:{type:"string",title:a("avatar.label"),description:a("avatar.text"),enum:null===u.p4||void 0===u.p4?void 0:u.p4.map((a=>a.value)),enumNames:null===u.p4||void 0===u.p4?void 0:u.p4.map((a=>a.label)),default:"system"},gravatar_base_url:{type:"string",title:a("gravatar_base_url.label"),description:a("gravatar_base_url.text")},profile_editable:{type:"string",title:a("profile_editable.title")},allow_update_display_name:{type:"boolean",title:"allow_update_display_name"},allow_update_username:{type:"boolean",title:"allow_update_username"},allow_update_avatar:{type:"boolean",title:"allow_update_avatar"},allow_update_bio:{type:"boolean",title:"allow_update_bio"},allow_update_website:{type:"boolean",title:"allow_update_website"},allow_update_location:{type:"boolean",title:"allow_update_location"}}},[w,b]=(0,l.useState)((0,_.pw)(n)),c={default_avatar:{"ui:widget":"select"},gravatar_base_url:{"ui:widget":"input"},profile_editable:{"ui:widget":"legend"},allow_update_display_name:{"ui:widget":"switch","ui:options":{label:a("allow_update_display_name.label"),simplify:!0}},allow_update_username:{"ui:widget":"switch","ui:options":{label:a("allow_update_username.label"),simplify:!0}},allow_update_avatar:{"ui:widget":"switch","ui:options":{label:a("allow_update_avatar.label"),simplify:!0}},allow_update_bio:{"ui:widget":"switch","ui:options":{label:a("allow_update_bio.label"),simplify:!0}},allow_update_website:{"ui:widget":"switch","ui:options":{label:a("allow_update_website.label"),simplify:!0}},allow_update_location:{"ui:widget":"switch","ui:options":{label:a("allow_update_location.label"),field_class_name:"mb-3",simplify:!0}}};(0,l.useEffect)((()=>{(0,s.nw)().then((a=>{if(!a)return;const e={};Object.keys(w).forEach((t=>{let l=a[t];"default_avatar"!==t||l||(l="system"),"gravatar_base_url"!==t||l||(l="https://cravatar.cn/avatar/"),e[t]={...w[t],value:l}})),b({...w,...e})}))}),[]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h3",{className:"mb-4",children:a("title")}),(0,d.jsx)(_.q,{schema:n,uiSchema:c,formData:w,onSubmit:l=>{l.preventDefault(),l.stopPropagation();const i={allow_update_avatar:w.allow_update_avatar.value,allow_update_bio:w.allow_update_bio.value,allow_update_display_name:w.allow_update_display_name.value,allow_update_location:w.allow_update_location.value,allow_update_username:w.allow_update_username.value,allow_update_website:w.allow_update_website.value,default_avatar:w.default_avatar.value,gravatar_base_url:w.gravatar_base_url.value};(0,s.sw)(i).then((()=>{t(i),e.onShow({msg:a("update",{keyPrefix:"toast"}),variant:"success"})})).catch((a=>{if(a.isError){const e=(0,p.NC)(a,w);b({...e});const t=document.getElementById(a.list[0].error_field);(0,p.qt)(t)}}))},onChange:a=>{b(a)}})]})}}}]);
//# sourceMappingURL=3512.f0c3c580.chunk.js.map