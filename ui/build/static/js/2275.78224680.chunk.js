"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[2275],{92275:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var i=t(28915),a=t(13015),s=t(98329),l=t(83556),d=t(53799),o=t(16413),r=t(18596),m=t(65200),c=t(51588),u=t(14577),v=t.n(u),_=t(47185),y=t(81801),x=t(48058),g=t(34202),h=t(24978),f=t(68179);const p=()=>{var e,n,t;const u=(0,h.bb)((e=>e.user)),p=(0,r.zy)(),b=Boolean(null===u||void 0===u?void 0:u.access_token),[j,k]=(0,i.useState)(!1),{tagName:N}=(0,r.g)(),{data:w,mutate:A}=(0,x.MF)({name:N}),{t:C}=(0,c.B)("translation",{keyPrefix:"tag_info"}),F=(0,r.Zp)(),{data:P,mutate:T}=(0,x.hn)(null===w||void 0===w?void 0:w.tag_id,null===w||void 0===w?void 0:w.status);let B="";if(w&&(B=`'${w.display_name}' ${C("tag_wiki",{keyPrefix:"page_title"})}`),(0,_.M4)({title:B}),(0,i.useEffect)((()=>{var e;if(null!==(e=p.state)&&void 0!==e&&e.isReview){h.ZW.getState().show({msg:C("review",{keyPrefix:"toast"}),variant:"warning"});const e={...p};delete e.state,window.history.replaceState(null,"",e.pathname)}}),[p.state]),(0,i.useEffect)((()=>{const e=document.querySelector(".content.fmt");e&&(0,y._A)(e)}),[null===w||void 0===w?void 0:w.parsed_text]),!w)return null;if(w.main_tag_slug_name)return F(g.w.tagInfo(w.main_tag_slug_name),{replace:!0}),null;const S=()=>{k(!0)},H=e=>{"edit"===e.action&&(0,x.xJ)(null===w||void 0===w?void 0:w.tag_id).then((()=>{F(g.w.tagEdit(null===w||void 0===w?void 0:w.tag_id))})),"delete"===e.action&&(null!==P&&void 0!==P&&P.synonyms&&P.synonyms.length>0?y.aF.confirm({title:C("delete.title"),content:C("delete.tip_with_synonyms"),showConfirm:!1,cancelText:C("delete.close")}):w.question_count>0?y.aF.confirm({title:C("delete.title"),content:C("delete.tip_with_posts"),showConfirm:!1,cancelText:C("delete.close")}):y.aF.confirm({title:C("delete.title"),content:C("delete.tip"),confirmText:C("delete",{keyPrefix:"btns"}),confirmBtnVariant:"danger",onConfirm:()=>{(0,x._R)(w.tag_id).then((()=>{F("/tags",{replace:!0})}))}})),"undelete"===e.action&&y.aF.confirm({title:C("undelete_title",{keyPrefix:"delete"}),content:C("undelete_desc",{keyPrefix:"delete"}),cancelBtnVariant:"link",confirmBtnVariant:"danger",confirmText:C("undelete",{keyPrefix:"btns"}),onConfirm:()=>{(0,x.fU)(w.tag_id).then((()=>{A()}))}})};return(0,f.jsxs)(a.A,{className:"pt-4 mb-5",children:[(0,f.jsxs)(s.A,{className:"page-main flex-auto",children:["deleted"===(null===w||void 0===w?void 0:w.status)&&(0,f.jsx)(l.A,{variant:"danger",className:"mb-4",children:C("post_deleted",{keyPrefix:"messages"})}),(0,f.jsx)("h3",{className:"mb-3",children:(0,f.jsx)(m.N_,{to:g.w.tagLanding(w.slug_name),replace:!0,className:"link-dark",children:w.display_name})}),(0,f.jsxs)("div",{className:"text-secondary mb-4 small",children:[(0,f.jsx)(y.H0,{preFix:C("created_at"),time:w.created_at}),(0,f.jsx)(y.H0,{preFix:C("edited_at"),className:"ms-3",time:w.updated_at})]}),(0,f.jsx)("div",{className:"content text-break fmt",dangerouslySetInnerHTML:{__html:null===w||void 0===w?void 0:w.parsed_text}}),(0,f.jsxs)("div",{className:"mt-4",children:[null===w||void 0===w?void 0:w.member_actions.map(((e,n)=>(0,f.jsx)(d.A,{variant:"link",size:"sm",className:v()("link-secondary btn-no-border p-0",n>0&&"ms-3"),onClick:()=>H(e),children:e.name},e.name))),b&&(0,f.jsx)(m.N_,{to:`/tags/${null===w||void 0===w?void 0:w.tag_id}/timeline`,className:v()("link-secondary btn-no-border p-0 small",(null===w||void 0===w||null===(e=w.member_actions)||void 0===e?void 0:e.length)>0&&"ms-3"),children:C("history")})]})]}),(0,f.jsx)(s.A,{className:"page-right-side mt-4 mt-xl-0",children:(0,f.jsxs)(o.A,{children:[(0,f.jsxs)(o.A.Header,{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{children:C("synonyms.title")}),j?(0,f.jsx)(d.A,{variant:"link",className:"p-0 btn-no-border",onClick:()=>{(0,x.tN)({tag_id:null===w||void 0===w?void 0:w.tag_id,synonym_tag_list:null===P||void 0===P?void 0:P.synonyms}).then((()=>{T(),k(!1)}))},children:C("synonyms.btn_save")}):null!==P&&void 0!==P&&null!==(n=P.member_actions)&&void 0!==n&&n.find((e=>"edit"===e.action))?(0,f.jsx)(d.A,{variant:"link",className:"p-0 btn-no-border",onClick:S,children:C("synonyms.btn_edit")}):null]}),(0,f.jsxs)(o.A.Body,{children:[j&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mb-3",children:[C("synonyms.text")," ",(0,f.jsx)(y.vw,{data:{slug_name:N||"",main_tag_slug_name:"",display_name:(null===w||void 0===w?void 0:w.display_name)||(null===w||void 0===w?void 0:w.slug_name)||"",recommend:!1,reserved:!1}})]}),(0,f.jsx)(y.Cx,{value:null===P||void 0===P?void 0:P.synonyms,onChange:e=>{T({...P,synonyms:[...e]},{revalidate:!1})},hiddenDescription:!0})]}),!j&&(null!==P&&void 0!==P&&P.synonyms&&P.synonyms.length>0?(0,f.jsx)("div",{className:"m-n1",children:P.synonyms.map((e=>(0,f.jsx)(y.vw,{className:"m-1",data:e},e.tag_id)))}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-muted mb-3",children:C("synonyms.empty")}),(null===P||void 0===P||null===(t=P.member_actions)||void 0===t?void 0:t.find((e=>"edit"===e.action)))&&(0,f.jsx)(d.A,{variant:"outline-primary",size:"sm",onClick:S,children:C("synonyms.btn_add")})]}))]})]})})]})}}}]);
//# sourceMappingURL=2275.78224680.chunk.js.map