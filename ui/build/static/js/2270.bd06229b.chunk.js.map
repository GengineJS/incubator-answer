{"version":3,"file":"static/js/2270.bd06229b.chunk.js","mappings":"mRA+BA,MA+CA,EA/CcA,KACZ,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,GAAe,cAAe,CAAEC,UAAW,gBACjDC,KAAMC,EAAgBC,MAAOC,IAAmBC,EAAAA,EAAAA,MAsCxD,OApCAC,EAAAA,EAAAA,IAAY,CACVC,MAAOT,EAAE,aAGXU,EAAAA,EAAAA,YAAU,KACJN,EAAeO,WACjBC,QAAQC,IAAIT,EAAeO,UAC3BG,EAAAA,GAAcC,QACZ,CACEC,MAAOZ,EAAeO,SACtBM,SAAU,GACVC,KAAMC,EAAAA,GAAcC,SAEtB,MACEC,EAAAA,EAAAA,MAASC,MAAK,KACZhB,IACA,MAAMiB,EACJC,EAAAA,EAAQC,IAAIC,EAAAA,KAA8BC,EAAAA,EAAWC,KACvDJ,EAAAA,EAAQK,OAAOH,EAAAA,IACfI,OAAOC,SAASC,QAAQ,GAAGF,OAAOC,SAASE,SAASV,IAAW,GAC/D,KAKR,MAAMW,EAAWC,SAASC,cAAc,cAKxC,OAJIF,IACFA,EAASG,MAAMC,QAAU,YAGpB,KACDJ,IACFA,EAASG,MAAMC,QAAU,QAC3B,CACD,GACA,KAEDC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yFAAwFC,UACrGF,EAAAA,EAAAA,KAACG,EAAAA,EAAO,CAACC,QAAQ,eACb,C","sources":["pages/Users/Logout/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useEffect } from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\n\nimport { usePageTags } from '@/hooks';\nimport { logout } from '@/services';\nimport { loggedUserInfoStore } from '@/stores';\nimport Storage from '@/utils/storage';\nimport { RouteAlias } from '@/router/alias';\nimport { IframeMsgType, REDIRECT_PATH_STORAGE_KEY } from '@/common/constants';\nimport { iframeManager } from '@/common/functions';\n\nconst Index = () => {\n  const { t } = useTranslation('translation', { keyPrefix: 'page_title' });\n  const { user: loggedUserInfo, clear: clearUserStore } = loggedUserInfoStore();\n\n  usePageTags({\n    title: t('logout'),\n  });\n\n  useEffect(() => {\n    if (loggedUserInfo.username) {\n      console.log(loggedUserInfo.username);\n      iframeManager.postMsg(\n        {\n          email: loggedUserInfo.username,\n          password: '',\n          type: IframeMsgType.LOGOUT,\n        },\n        () => {\n          logout().then(() => {\n            clearUserStore();\n            const redirect =\n              Storage.get(REDIRECT_PATH_STORAGE_KEY) || RouteAlias.home;\n            Storage.remove(REDIRECT_PATH_STORAGE_KEY);\n            window.location.replace(`${window.location.origin}${redirect}`);\n          });\n        },\n      );\n    }\n    // auto height of container\n    const pageWrap = document.querySelector('.page-wrap') as HTMLElement;\n    if (pageWrap) {\n      pageWrap.style.display = 'contents';\n    }\n\n    return () => {\n      if (pageWrap) {\n        pageWrap.style.display = 'block';\n      }\n    };\n  }, []);\n  return (\n    <div className=\"d-flex flex-column flex-shrink-1 flex-grow-1 justify-content-center align-items-center\">\n      <Spinner variant=\"secondary\" />\n    </div>\n  );\n};\n\nexport default Index;\n"],"names":["Index","t","useTranslation","keyPrefix","user","loggedUserInfo","clear","clearUserStore","loggedUserInfoStore","usePageTags","title","useEffect","username","console","log","iframeManager","postMsg","email","password","type","IframeMsgType","LOGOUT","logout","then","redirect","Storage","get","REDIRECT_PATH_STORAGE_KEY","RouteAlias","home","remove","window","location","replace","origin","pageWrap","document","querySelector","style","display","_jsx","className","children","Spinner","variant"],"sourceRoot":""}