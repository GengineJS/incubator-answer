"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[8040],{88040:(s,e,a)=>{a.r(e),a.d(e,{default:()=>m});var r=a(28915),l=a(46261),n=a(53799),t=a(51588),i=a(14577),o=a.n(i),d=a(47185),c=a(25831),p=a(48058),u=a(4440),v=a(24978),h=a(68179);const g=()=>{const{t:s}=(0,t.B)("translation",{keyPrefix:"settings.account"}),{user:e}=(0,v.bb)(),[a,i]=(0,r.useState)(!1),g=(0,d.dj)(),[m,_]=(0,r.useState)({old_pass:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""},pass2:{value:"",isInvalid:!1,errorMsg:""}}),b=(0,c.T5)("edit_userinfo"),x=()=>{i((s=>!s))},I=s=>{_({...m,...s})},j=e=>{e&&e.preventDefault();const a={old_pass:m.old_pass.value,pass:m.pass.value},r=null===b||void 0===b?void 0:b.getCaptcha();null!==r&&void 0!==r&&r.verify&&(a.captcha_code=r.captcha_code,a.captcha_id=r.captcha_id),(0,p.Sx)(a).then((async()=>{await(null===b||void 0===b?void 0:b.close()),g.onShow({msg:s("update_password",{keyPrefix:"toast"}),variant:"success"}),x()})).catch((s=>{if(s.isError){null===b||void 0===b||b.handleCaptchaError(s.list);const e=(0,u.NC)(s,m);_({...e});const a=document.getElementById(s.list[0].error_field);(0,u.qt)(a)}}))};return(0,h.jsx)("div",{className:"mt-5",children:a?(0,h.jsxs)(l.A,{noValidate:!0,onSubmit:a=>{a.preventDefault(),a.stopPropagation(),(()=>{let a=!0;const{old_pass:r,pass:l,pass2:n}=m;if(!r.value&&e.have_password&&(a=!1,m.old_pass={value:"",isInvalid:!0,errorMsg:s("current_pass.msg.empty")}),l.value||(a=!1,m.pass={value:"",isInvalid:!0,errorMsg:s("current_pass.msg.empty")}),a&&l.value&&l.value.length<8&&(a=!1,m.pass={value:l.value,isInvalid:!0,errorMsg:s("current_pass.msg.length")}),n.value||(a=!1,m.pass2={value:"",isInvalid:!0,errorMsg:s("current_pass.msg.empty")}),a&&n.value&&n.value.length<8&&(a=!1,m.pass2={value:n.value,isInvalid:!0,errorMsg:s("current_pass.msg.length")}),a&&l.value&&n.value&&l.value!==n.value&&(a=!1,m.pass2={value:n.value,isInvalid:!0,errorMsg:s("current_pass.msg.different")}),_({...m}),!a){const s=Object.keys(m).filter((s=>m[s].isInvalid)),e=document.getElementById(s[0]);(0,u.qt)(e)}return a})()&&(b?b.check((()=>{j()})):j())},children:[(0,h.jsxs)(l.A.Group,{controlId:"old_pass",className:o()("mb-3",e.have_password?"":"d-none"),children:[(0,h.jsx)(l.A.Label,{children:s("current_pass.label")}),(0,h.jsx)(l.A.Control,{autoComplete:"off",required:!0,type:"password",placeholder:"",isInvalid:m.old_pass.isInvalid,onChange:s=>I({old_pass:{value:s.target.value,isInvalid:!1,errorMsg:""}})}),(0,h.jsx)(l.A.Control.Feedback,{type:"invalid",children:m.old_pass.errorMsg})]}),(0,h.jsxs)(l.A.Group,{controlId:"new_pass",className:"mb-3",children:[(0,h.jsx)(l.A.Label,{children:s("new_pass.label")}),(0,h.jsx)(l.A.Control,{autoComplete:"off",required:!0,type:"password",isInvalid:m.pass.isInvalid,onChange:s=>I({pass:{value:s.target.value,isInvalid:!1,errorMsg:""}})}),(0,h.jsx)(l.A.Control.Feedback,{type:"invalid",children:m.pass.errorMsg})]}),(0,h.jsxs)(l.A.Group,{controlId:"pass2",className:"mb-3",children:[(0,h.jsx)(l.A.Label,{children:s("pass_confirm.label")}),(0,h.jsx)(l.A.Control,{autoComplete:"off",required:!0,type:"password",isInvalid:m.pass2.isInvalid,onChange:s=>I({pass2:{value:s.target.value,isInvalid:!1,errorMsg:""}})}),(0,h.jsx)(l.A.Control.Feedback,{type:"invalid",children:m.pass2.errorMsg})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(n.A,{type:"submit",variant:"primary",className:"me-2",children:s("save",{keyPrefix:"btns"})}),(0,h.jsx)(n.A,{variant:"link",onClick:()=>x(),children:s("cancel",{keyPrefix:"btns"})})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.A.Label,{children:s("password_title")}),(0,h.jsx)("br",{}),(0,h.jsx)(n.A,{variant:"outline-secondary",type:"submit",onClick:()=>{x()},children:s("change_pass_btn")})]})})},m=r.memo(g)}}]);
//# sourceMappingURL=8040.64594c9b.chunk.js.map