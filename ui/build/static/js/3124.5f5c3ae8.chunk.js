"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[3124,9094,386,7389,6520],{39094:(e,n,t)=>{t.r(n),t.d(n,{default:()=>u});var s=t(84012),i=t(65200),a=t(14577),o=t.n(a),c=t(90326),l=t.n(c),r=t(81801),d=(t(386),t(68179));const u=({data:e,handleReadNotification:n})=>e?l()(e)?(0,d.jsx)(r.Sv,{}):(0,d.jsx)(s.A,{className:"achievement-wrap rounded-0",children:e.map((e=>{var t;const{comment:a,question:c,answer:l}=(null===e||void 0===e||null===(t=e.object_info)||void 0===t?void 0:t.object_map)||{};let r="";switch(e.object_info.object_type){case"question":r=`/questions/${e.object_info.object_id}`;break;case"answer":r=`/questions/${c}/${e.object_info.object_id}`;break;case"comment":r=`/questions/${c}/${l}?commentId=${a}`;break;default:r=""}return(0,d.jsxs)(s.A.Item,{className:o()("d-flex border-start-0 border-end-0 py-3",!e.is_read&&"warning"),children:[e.rank>0&&(0,d.jsx)("div",{className:"text-success num text-end",children:`+${e.rank}`}),0===e.rank&&(0,d.jsx)("div",{className:"num text-end",children:e.rank}),e.rank<0&&(0,d.jsx)("div",{className:"text-danger num text-end",children:`${e.rank}`}),(0,d.jsxs)("div",{className:"d-flex flex-column ms-3 flex-fill",children:[(0,d.jsx)(i.N_,{to:r,onClick:()=>n(e.id),children:e.object_info.title}),(0,d.jsx)("span",{className:"text-secondary small",children:e.object_info.object_type})]})]},e.id)}))}):null},89770:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var s=t(84012),i=t(65200),a=t(51588),o=t(14577),c=t.n(o),l=t(90326),r=t.n(l),d=t(81801),u=t(24978),m=t(68179);const f=({data:e,handleReadNotification:n})=>{const{t:t}=(0,a.B)("translation",{keyPrefix:"notifications"}),o=(0,u.bb)((e=>e.user));if(console.log(o),!e)return null;if(r()(e))return(0,m.jsx)(d.Sv,{});const l=function(e){var n,s;const i=o,a=null===(n=e.user_info)||void 0===n?void 0:n.display_name;return i.id===(null===(s=e.user_info)||void 0===s?void 0:s.id)?t("you"):a};return(0,m.jsx)(s.A,{className:"rounded-0",children:e.map((e=>{var a;const{comment:o,question:r,answer:u}=(null===e||void 0===e||null===(a=e.object_info)||void 0===a?void 0:a.object_map)||{};let f="";switch(e.object_info.object_type){case"question":f=`/questions/${e.object_info.object_id}?content_type=${e.object_info.content_type}`;break;case"answer":f=`/questions/${r}/${e.object_info.object_id}?content_type=${e.object_info.content_type}`;break;case"comment":f=`/questions/${r}/${u}?commentId=${o}&content_type=${e.object_info.content_type}`;break;default:f=""}return(0,m.jsxs)(s.A.Item,{className:c()("py-3 border-start-0 border-end-0",!e.is_read&&"warning"),children:[(0,m.jsxs)("div",{children:[e.user_info&&"deleted"!==e.user_info.status?(0,m.jsxs)(i.N_,{to:`/users/${e.user_info.username}`,children:[l(e)," "]}):(0,m.jsxs)("span",{children:[l(e)||t("someone")," "]}),e.notification_action," ",(0,m.jsx)(i.N_,{to:f,onClick:()=>n(e.id),children:e.object_info.title})]}),(0,m.jsx)("div",{className:"text-secondary small",children:(0,m.jsx)(d.H0,{time:e.update_time})})]},e.id)}))})}},3124:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var s=t(28915),i=t(13015),a=t(98329),o=t(93168),c=t(53799),l=t(10610),r=t(51588),d=t(18596),u=t(65200),m=t(14577),f=t.n(m),x=t(47185),j=t(48058),b=t(4440),h=t(89770),_=t(39094),v=(t(66520),t(68179));const p=()=>{const[e,n]=(0,s.useState)(1),[t,m]=(0,s.useState)([]),{t:p}=(0,r.B)("translation",{keyPrefix:"notifications"}),k=["all","posts","invites","votes","integrals"],{type:y="inbox",subType:N=k[0]}=(0,d.g)(),$={type:y,page:e,page_size:10};"inbox"===y&&($.inbox_type=N);const{data:g,mutate:w}=(0,j.mq)($);(0,s.useEffect)((()=>{(0,j.FV)(y)}),[]),(0,s.useEffect)((()=>{g&&m(e>1?[...t,...(null===g||void 0===g?void 0:g.list)||[]]:null===g||void 0===g?void 0:g.list)}),[g]);const A=(0,d.Zp)(),q=(e,t)=>{b.Jg.shouldProcessLinkClick(e)&&(e.preventDefault(),y!==t&&(n(1),m([]),A(`/users/notifications/${t}`)))},C=e=>{(0,j.Sb)(e)};return(0,x.M4)({title:p("notifications",{keyPrefix:"page_title"})}),(0,v.jsxs)(i.A,{className:"pt-4 mb-5",children:[(0,v.jsxs)(a.A,{className:"page-main flex-auto",children:[(0,v.jsx)("h3",{className:"mb-4",children:p("title")}),(0,v.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,v.jsxs)(o.A,{size:"sm",children:[(0,v.jsx)(c.A,{as:"a",href:"/users/notifications/inbox",variant:"outline-secondary",active:"inbox"===y,onClick:e=>q(e,"inbox"),children:p("inbox")}),(0,v.jsx)(c.A,{as:"a",href:"/users/notifications/achievement",variant:"outline-secondary",active:"achievement"===y,onClick:e=>q(e,"achievement"),children:p("achievement")})]}),(0,v.jsx)(c.A,{size:"sm",variant:"outline-secondary",onClick:async()=>{await(0,j.gS)(y),w()},children:p("all_read")})]}),"inbox"===y&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{className:"inbox-nav small",children:k.map((e=>{const t=`/users/notifications/inbox/${e}`,s=p(`inbox_type.${e}`);return(0,v.jsx)(l.A.Item,{children:(0,v.jsx)(u.N_,{to:t,onClick:()=>{n(1)},className:f()("nav-link",{disabled:e===N}),children:s})},e)}))}),(0,v.jsx)(h.default,{data:t,handleReadNotification:C})]}),"achievement"===y&&(0,v.jsx)(_.default,{data:t,handleReadNotification:C}),((null===g||void 0===g?void 0:g.count)||0)>10*e&&(0,v.jsx)("div",{className:"d-flex justify-content-center align-items-center py-3",children:(0,v.jsx)(c.A,{variant:"link",className:"btn-no-border",onClick:()=>{n(e+1)},children:p("show_more")})})]}),(0,v.jsx)(a.A,{className:"page-right-side"})]})}},386:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});const s={}},66520:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});const s={}}}]);
//# sourceMappingURL=3124.5f5c3ae8.chunk.js.map