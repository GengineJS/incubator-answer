"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[2953,9146,8462,7196,6650,3336,9080,6211],{19146:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var i=t(28915),l=t(83556),n=t(51588),a=t(17534),d=t.n(a),o=t(68179);const r=({data:e})=>{const{t:s}=(0,n.B)();return(0,o.jsx)(l.A,{className:"mb-4",variant:e.level,children:"info"===e.level?(0,o.jsxs)("div",{children:[e.msg.startsWith("http")?(0,o.jsxs)("p",{children:[e.description," ",(0,o.jsx)("a",{href:e.msg,className:"alert-exist",children:(0,o.jsx)("strong",{children:s("question_detail.show_exist")})})]}):(0,o.jsx)("p",{children:e.msg?e.msg:e.description}),(0,o.jsxs)("div",{className:"small",children:[s("question_detail.closed_in")," ",(0,o.jsx)("time",{dateTime:d().unix(e.time).tz().toISOString(),title:d().unix(e.time).tz().format(s("dates.long_date_with_time")),children:d().unix(e.time).tz().format(s("dates.long_date_with_year"))}),"."]})]}):e.msg})},c=(0,i.memo)(r)},88462:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var i=t(28915),l=t(83556),n=t(67324),a=t(53799),d=t(51588),o=t(65200),r=t(81801),c=t(4440),m=t(48058),u=t(25831),x=t(76812),h=t(15480),v=t(68179);const p=({aid:e,data:s,acceptedId:t,isLogged:p,score:j=0,questionTitle:_="",callback:f,canAccept:g=!1})=>{var w,b,N;const y=(0,h.gH)(),k=-1!==x._P.indexOf(y),A=j&&k;"0"!==t&&A&&(g=2===s.accepted);const{t:I}=(0,d.B)("translation",{keyPrefix:"question_detail"}),[q]=(0,o.ok)(),C=(0,i.useRef)(null);(0,u.e9)(C.current);const P=2===(null===s||void 0===s?void 0:s.accepted);return(0,i.useEffect)((()=>{null!==C&&void 0!==C&&C.current&&((0,r._A)(C.current.querySelector(".fmt")),e===s.id&&setTimeout((()=>{const e=C.current;(0,c.qt)(e),q.get("commentId")||(0,c.gj)(C.current)}),100))}),[s.id,C.current]),null!==s&&void 0!==s&&s.id?(0,v.jsxs)("div",{id:s.id,ref:C,className:"answer-item py-4",children:[10===s.status&&(0,v.jsx)(l.A,{variant:"danger",className:"mb-4",children:I("post_deleted",{keyPrefix:"messages"})}),11===s.status&&(0,v.jsx)(l.A,{variant:"secondary",className:"mb-4",children:I("post_pending",{keyPrefix:"messages"})}),P&&(0,v.jsx)("div",{className:"mb-3 lh-1",children:(0,v.jsxs)(n.A,{bg:"success",pill:!0,children:[(0,v.jsx)(r.In,{name:"check-circle-fill me-1"}),I("best_answer")]})}),(0,v.jsxs)(r.EQ,{children:[(0,v.jsx)("article",{className:"fmt text-break text-wrap",dangerouslySetInnerHTML:{__html:null===s||void 0===s?void 0:s.html}}),s.is_ai&&(0,v.jsxs)("div",{className:"fmt fs-7 small text-secondary text-break text-wrap",children:["(",I("ai_commented"),")"]})]}),(0,v.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,v.jsx)(r.En,{source:"answer",data:{id:null===s||void 0===s?void 0:s.id,isHate:"vote_down"===(null===s||void 0===s?void 0:s.vote_status),isLike:"vote_up"===(null===s||void 0===s?void 0:s.vote_status),votesCount:null===s||void 0===s?void 0:s.vote_count,hideCollect:!0,collected:null===s||void 0===s?void 0:s.collected,collectCount:0,username:null===s||void 0===s||null===(w=s.user_info)||void 0===w?void 0:w.username}}),g&&(0,v.jsxs)(a.A,{variant:2===s.accepted?"success":"outline-success",className:"ms-3",onClick:()=>{A?r.aF.confirm({title:I("accept_title"),content:I(P?"not_accept":"warn_accept"),cancelBtnVariant:"link",confirmBtnVariant:"danger",confirmText:I(P?"ok":"accept"),onConfirm:()=>{P||(0,m.EL)({question_id:s.question_id,answer_id:2===s.accepted?"0":s.id,score:A?j:0}).then((()=>{null===f||void 0===f||f("")}))}}):(0,m.EL)({question_id:s.question_id,answer_id:2===s.accepted?"0":s.id}).then((()=>{null===f||void 0===f||f("")}))},children:[(0,v.jsx)(r.In,{name:"check-circle-fill",className:"me-2"}),(0,v.jsx)("span",{children:2===s.accepted?I("answers.btn_accepted"):I("answers.btn_accept")})]})]}),(0,v.jsxs)("div",{className:"d-block d-md-flex flex-wrap mt-4 mb-3",children:[(0,v.jsx)("div",{className:"mb-3 mb-md-0 me-4 flex-grow-1",children:(0,v.jsx)(r.lR,{qid:s.question_id,aid:s.id,score:j,memberActions:null===s||void 0===s?void 0:s.member_actions,type:"answer",isAccepted:2===s.accepted,title:_,callback:f})}),(0,v.jsx)("div",{className:"mb-3 mb-md-0 me-4",style:{minWidth:"196px"},children:s.update_user_info&&(null===(b=s.update_user_info)||void 0===b?void 0:b.username)!==(null===(N=s.user_info)||void 0===N?void 0:N.username)?(0,v.jsx)(r.qu,{data:null===s||void 0===s?void 0:s.update_user_info,time:Number(s.update_time),preFix:I("edit"),isLogged:p,timelinePath:`/posts/${s.question_id}/${s.id}/timeline`}):p?(0,v.jsx)(o.N_,{to:`/posts/${s.question_id}/${s.id}/timeline`,children:(0,v.jsx)(r.H0,{time:Number(s.update_time),preFix:I("edit"),className:"link-secondary small"})}):(0,v.jsx)(r.H0,{time:Number(s.update_time),preFix:I("edit"),className:"text-secondary small"})}),(0,v.jsx)("div",{style:{minWidth:"196px"},children:(0,v.jsx)(r.qu,{data:null===s||void 0===s?void 0:s.user_info,time:Number(s.create_time),preFix:I("answered"),isLogged:p,timelinePath:`/posts/${s.question_id}/${s.id}/timeline`})})]}),(0,v.jsx)(r.Mw,{objectId:s.id,isObjectAI:s.is_ai,mode:"answer",commentId:q.get("commentId")})]}):null},j=(0,i.memo)(p)},77196:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var i=t(28915),l=t(51588),n=t(81801),a=t(68179);const d=[{name:"score",sort:"default"},{name:"newest",sort:"updated"},{name:"oldest",sort:"created"}],o=({count:e=0,order:s="default"})=>{const{t:t}=(0,l.B)("translation",{keyPrefix:"question_detail.answers"});return(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-5 mb-3",id:"answerHeader",children:[(0,a.jsxs)("h5",{className:"mb-0",children:[e," ",t("title")]}),(0,a.jsx)(n.gu,{data:d,currentSort:"updated"===s?"newest":"created"===s?"oldest":"score",i18nKeyPrefix:"question_detail.answers"})]})},r=(0,i.memo)(o)},56650:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var i=t(28915),l=t(68179);const n=()=>(0,l.jsxs)("div",{className:"placeholder-glow",children:[(0,l.jsx)("div",{className:"placeholder w-100 h1 mb-3",style:{height:"34px"}}),(0,l.jsx)("div",{className:"placeholder w-75 mb-3",style:{height:"21px"}}),(0,l.jsx)("div",{className:"placeholder w-50 d-block align-top mb-4",style:{height:"24px"}}),(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-75 d-block align-top",style:{height:"24px"}})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-100 d-block align-top mb-1",style:{height:"24px"}}),(0,l.jsx)("span",{className:"placeholder w-50 d-block align-top",style:{height:"24px"}})]})]}),(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("div",{className:"placeholder align-top me-3 rounded",style:{height:"38px",width:"120px"}}),(0,l.jsx)("div",{className:"placeholder align-top rounded",style:{height:"38px",width:"68px"}})]}),(0,l.jsxs)("div",{className:"d-block d-md-flex flex-wrap mt-4 mb-3",children:[(0,l.jsx)("div",{className:"placeholder mb-3 mb-md-0 me-4",style:{height:"21px",width:"40%"}}),(0,l.jsx)("div",{style:{minWidth:"196px",height:"24px"},className:"placeholder mb-3 me-4 mb-md-0 d-block d-md-none"}),(0,l.jsx)("div",{style:{minWidth:"196px",height:"24px"},className:"placeholder d-block d-md-none"}),(0,l.jsx)("div",{style:{minWidth:"196px",height:"40px"},className:"placeholder mb-3 me-4 mb-md-0 d-none d-md-block"}),(0,l.jsx)("div",{style:{minWidth:"196px",height:"40px"},className:"placeholder d-none d-md-block"})]}),[0,1,2].map(((e,s)=>(0,l.jsxs)("div",{className:"border-bottom py-2 "+(0===s?"border-top":""),children:[(0,l.jsx)("div",{className:"placeholder w-100 mb-1",style:{height:"17px"}}),(0,l.jsx)("div",{className:"placeholder w-50",style:{height:"17px"}})]},e))),(0,l.jsxs)("div",{className:"d-flex mt-2 mb-4",children:[(0,l.jsx)("div",{className:"placeholder align-top me-4",style:{height:"21px",width:"140px"}}),(0,l.jsx)("div",{className:"placeholder align-top",style:{height:"21px",width:"140px"}})]})]}),a=(0,i.memo)(n)},75190:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var i=t(28915),l=t(99205),n=t(46261),a=t(51588),d=t(24978),o=t(48058),r=t(81801),c=(t(55026),t(68179));const m=({selectedPeople:e=[],visible:s=!1,onSelect:t,saveInviteUsers:m})=>{const{user:u}=(0,d.bb)(),{t:x}=(0,a.B)("translation",{keyPrefix:"invite_to_answer"}),[h,v]=(0,i.useState)([]),[p,j]=(0,i.useState)(-1),[_,f]=(0,i.useState)(""),g=s=>{s?(0,o.c5)(s).then((s=>{(s=>{const t=[];s.forEach((s=>{u&&1===u.role_id&&u.username===s.username||null!==e&&void 0!==e&&e.find((e=>e.username===s.username))||t.push(s)})),v([...e,...t])})(s)})):v([...e])},w=e=>{if(e<0||e>=h.length)return;const s=h[e];s&&t(s)};return(0,i.useEffect)((()=>{s&&e.length>0&&v(e),s||(j(-1),f(""),v([]))}),[s]),s?(0,c.jsx)(l.A,{autoClose:"outside",show:!0,className:"people-dropdown",onSelect:w,onKeyDown:e=>{if(e.stopPropagation(),null===h||void 0===h||!h.length)return;const{keyCode:s}=e;38===s&&p>0&&j(p-1),40===s&&p<h.length-1&&j(p+1),13===s&&p>-1&&(e.preventDefault(),w(p))},onToggle:e=>{e||m()},children:(0,c.jsxs)(l.A.Menu,{renderOnMount:!0,show:!0,className:"w-100 py-0 position-relative",children:[(0,c.jsx)("div",{className:"p-3",children:(0,c.jsx)(n.A.Control,{type:"search",autoFocus:!0,placeholder:x("search"),value:_,onChange:e=>{const s=e.target.value;f(s),g(s)}})}),(0,c.jsx)("div",{className:""+(h.length>0?"py-2 border-top":""),children:h.map(((s,t)=>(0,c.jsx)(l.A.Item,{eventKey:t,onFocus:()=>{j(t)},active:t===p,children:(0,c.jsxs)(n.A.Check,{type:"checkbox",id:s.username,className:"position-relative",children:[(0,c.jsx)(n.A.Check.Input,{type:"checkbox",tabIndex:-1,checked:Boolean(null===e||void 0===e?void 0:e.find((e=>e.id===s.id))),onChange:()=>{}}),(0,c.jsx)("div",{className:"check-cover"}),(0,c.jsxs)(n.A.Check.Label,{className:"d-flex align-items-center text-nowrap",children:[(0,c.jsx)(r.eu,{avatar:s.avatar,size:"24",alt:s.display_name,className:"rounded-1"}),(0,c.jsxs)("div",{className:"d-flex flex-wrap text-truncate",children:[(0,c.jsx)("span",{className:"ms-2 text-truncate",children:s.display_name}),(0,c.jsxs)("small",{className:"text-secondary text-truncate ms-2",children:["@",s.username]})]})]})]})},s.username)))})]})}):null}},94586:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var i=t(28915),l=t(16413),n=t(53799),a=t(51588),d=t(65200),o=t(14577),r=t.n(o),c=t(81801),m=t(48058),u=t(25831),x=t(75190),h=(t(49200),t(68179));const v=({questionId:e,readOnly:s=!1})=>{const{t:t}=(0,a.B)("translation",{keyPrefix:"invite_to_answer"}),[o,v]=(0,i.useState)(!1),[p,j]=(0,i.useState)([]),_=(0,u.T5)("invitation_answer"),f=()=>{const s=p.map((e=>e.username)),t={};null===_||void 0===_||_.resolveCaptchaReq(t),(0,m.q_)(e,s,t).then((async()=>{await(null===_||void 0===_?void 0:_.close()),v(!1)})).catch((e=>{e.isError&&(null===_||void 0===_||_.handleCaptchaError(e.list))}))};(0,i.useEffect)((()=>{e&&(0,m.dI)(e).then((e=>{j(e)})).catch((()=>{p||j([])}))}),[e]);return s&&0===(null===p||void 0===p?void 0:p.length)?null:(0,h.jsxs)(l.A,{className:"invite-answer-card position-relative border-0 mb-4",children:[(0,h.jsxs)(l.A.Header,{className:"text-nowrap d-flex justify-content-between text-capitalize",children:[t("title"),!s&&(0,h.jsx)(n.A,{onClick:()=>v(!0),variant:"link",className:"p-0",children:t("edit",{keyPrefix:"btns"})})]}),(0,h.jsx)(l.A.Body,{className:r()("position-relative"),children:(0,h.jsxs)("div",{className:r()("d-flex align-items-center flex-wrap m-n1"),children:[null===p||void 0===p?void 0:p.map((e=>(0,h.jsxs)(d.N_,{to:`/users/${e.username}`,className:"mx-2 my-1 d-inline-flex flex-nowrap",children:[(0,h.jsx)(c.eu,{avatar:e.avatar,size:"24",alt:e.display_name,className:"rounded-1"}),(0,h.jsx)("small",{className:"ms-2",children:e.display_name})]},e.username))),0===(null===p||void 0===p?void 0:p.length)?(0,h.jsx)("div",{className:"text-muted",children:t("desc")}):null]})}),o&&(0,h.jsx)(x.default,{visible:o,selectedPeople:p,onSelect:e=>{const s=null===p||void 0===p?void 0:p.find((s=>s.id===e.id));let t=[...p||[]];var i;s?t=null===(i=t)||void 0===i?void 0:i.filter((s=>s.id!==e.id)):t.push(e);j(t)},saveInviteUsers:()=>{p&&(_?_.check((()=>f())):f())}})]})},p=(0,i.memo)(v)},70955:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var i=t(28915),l=t(65200),n=t(51588),a=t(54923),d=t(16268),o=t(53799),r=t(81801),c=t(25831),m=t(4440),u=t(48058),x=t(15480),h=t(64711),v=t(76812),p=t(24978),j=t(68179);const _=({data:e,initPage:s,hasAnswer:t,isLogged:_})=>{var f,g,w,b;const{t:N}=(0,n.B)("translation",{keyPrefix:"question_detail"}),[y]=(0,l.ok)(),[k,A]=(0,i.useState)(null===e||void 0===e?void 0:e.is_followed),I=(0,i.useRef)(null),q=(0,x.gH)();(0,c.e9)(I.current);const C=(0,p.bb)((e=>e.user));return(0,i.useEffect)((()=>{e&&A(null===e||void 0===e?void 0:e.is_followed)}),[e]),(0,i.useEffect)((()=>{I.current&&(0,r._A)(I.current)}),[I.current]),null!==e&&void 0!==e&&e.id&&"0"!==(null===e||void 0===e?void 0:e.id)?((0,x.p)(e,C),(0,j.jsxs)("div",{children:[(0,j.jsxs)("h1",{className:"h3 mb-3 text-wrap text-break",children:[2===(null===e||void 0===e?void 0:e.pin)&&(0,j.jsx)(r.In,{name:"pin-fill",className:"me-1",title:N("pinned",{keyPrefix:"btns"})}),(0,j.jsxs)("div",{className:"link-dark",children:[e.title,(0,j.jsx)(h.A,{score:e.score,t:N,contentType:q,isPay:(0,v.Cy)(e,C)||!!C.id&&-1!==e.buyer_user_ids.indexOf(C.id)}),2===e.status?` [${N("closed",{keyPrefix:"question"})}]`:""]})]}),(0,j.jsxs)("div",{className:"d-flex flex-wrap align-items-center small mb-3 text-secondary",children:[(0,j.jsx)(r.H0,{time:e.create_time,preFix:N("Asked"),className:"me-3"}),(0,j.jsx)(r.H0,{time:e.update_time,preFix:N("update"),className:"me-3"}),(null===e||void 0===e?void 0:e.view_count)>0&&(0,j.jsxs)("div",{className:"me-3",children:[N("Views")," ",(0,m.B4)(e.view_count)]}),(0,j.jsx)(a.A,{placement:"bottom",overlay:(0,j.jsx)(d.A,{id:"followTooltip",children:N("follow_tip")}),children:(0,j.jsx)(o.A,{variant:"link",size:"sm",className:"p-0 btn-no-border",onClick:s=>(s=>{s.preventDefault(),m.ah.tryNormalLogged(!0)&&(0,u.CQ)({object_id:null===e||void 0===e?void 0:e.id,is_cancel:k}).then((e=>{A(e.is_followed)}))})(s),children:N(k?"Following":"Follow")})})]}),(0,j.jsx)("div",{className:"m-n1",children:null===e||void 0===e||null===(f=e.tags)||void 0===f?void 0:f.map((e=>(0,j.jsx)(r.vw,{className:"m-1",data:e},e.slug_name)))}),(0,j.jsx)(r.EQ,{children:(0,j.jsx)("article",{ref:I,className:"fmt text-break text-wrap mt-4",dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.html}})}),(0,j.jsx)(r.En,{className:"mt-4",source:"question",data:{id:null===e||void 0===e?void 0:e.id,isHate:"vote_down"===(null===e||void 0===e?void 0:e.vote_status),isLike:"vote_up"===(null===e||void 0===e?void 0:e.vote_status),votesCount:null===e||void 0===e?void 0:e.vote_count,collected:null===e||void 0===e?void 0:e.collected,collectCount:null===e||void 0===e?void 0:e.collection_count,username:null===(g=e.user_info)||void 0===g?void 0:g.username}}),(0,j.jsxs)("div",{className:"d-block d-md-flex flex-wrap mt-4 mb-3",children:[(0,j.jsx)("div",{className:"mb-3 mb-md-0 me-4 flex-grow-1",children:(0,j.jsx)(r.lR,{qid:null===e||void 0===e?void 0:e.id,type:"question",score:e.score,memberActions:null===e||void 0===e?void 0:e.member_actions,title:e.title,hasAnswer:t,isAccepted:Boolean("0"!==(null===e||void 0===e?void 0:e.accepted_answer_id)),callback:s})}),(0,j.jsx)("div",{style:{minWidth:"196px"},className:"mb-3 me-4 mb-md-0",children:e.update_user_info&&(null===(w=e.update_user_info)||void 0===w?void 0:w.username)!==(null===(b=e.user_info)||void 0===b?void 0:b.username)?(0,j.jsx)(r.qu,{data:null===e||void 0===e?void 0:e.update_user_info,time:e.edit_time,preFix:N("edit"),isLogged:_,timelinePath:`/posts/${e.id}/timeline?content_type=${q}`}):_?(0,j.jsx)(l.N_,{to:`/posts/${e.id}/timeline?content_type=${q}`,children:(0,j.jsx)(r.H0,{time:e.edit_time,preFix:N("edit"),className:"link-secondary small"})}):(0,j.jsx)(r.H0,{time:e.edit_time,preFix:N("edit"),className:"text-secondary small"})}),(0,j.jsx)("div",{style:{minWidth:"196px"},children:(0,j.jsx)(r.qu,{data:null===e||void 0===e?void 0:e.user_info,time:e.create_time,preFix:N("asked"),isLogged:_,timelinePath:`/posts/${e.id}/timeline`})})]}),(0,j.jsx)(r.Mw,{objectId:null===e||void 0===e?void 0:e.id,mode:"question",commentId:y.get("commentId")})]})):null},f=(0,i.memo)(_)},49080:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var i=t(28915),l=t(16413),n=t(84012),a=t(18596),d=t(65200),o=t(51588),r=t(81801),c=t(48058),m=t(38229),u=t(64711),x=t(72551),h=t(24978),v=t(76812),p=t(68179);const j=({id:e})=>{var s;const t=(0,v.gH)(),{t:i}=(0,o.B)("translation",{keyPrefix:m.h$[t]}),{t:j}=(0,o.B)("translation",{keyPrefix:"question"}),_=(0,a.Zp)(),f=(0,h.bb)((e=>e.user)),{data:g,isLoading:w}=(0,c.r5)({question_id:e,page_size:5,content_type:t});return w?null:(0,p.jsxs)(l.A,{children:[(0,p.jsx)(l.A.Header,{children:i("title")}),(0,p.jsx)(n.A,{variant:"flush",children:null===g||void 0===g||null===(s=g.list)||void 0===s?void 0:s.map((e=>(0,p.jsxs)(n.A.Item,{action:!0,as:d.N_,onClick:s=>{s.preventDefault(),(0,x.A)(j,_,f,e)},to:".",children:[(0,p.jsxs)("div",{className:"link-dark",children:[e.title,(0,p.jsx)(u.A,{score:e.score,t:i,contentType:e.content_type,isPay:(0,v.Cy)(e,f)||-1!==e.buyer_user_ids.indexOf(f.id)})]}),e.answer_count>0&&(0,p.jsxs)("div",{className:"mt-1 small me-2 "+(e.accepted_answer_id>0?"link-success":"link-secondary"),children:[(0,p.jsx)(r.In,{name:e.accepted_answer_id>0?"check-circle-fill":"chat-square-text-fill",className:"me-1"}),(0,p.jsxs)("span",{children:[e.answer_count," ",i("answers")]})]})]},e.id)))})]})},_=(0,i.memo)(j)},16211:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var i=t(28915),l=t(46261),n=t(83556),a=t(53799),d=t(67324),o=t(51588),r=t(31574),c=t(65200),m=t(68223),u=t(14577),x=t.n(u),h=t(47185),v=t(25831),p=t(81801),j=t(48058),_=t(4440),f=t(76812),g=t(24978),w=t(15480),b=t(68179);const N=new _.ZT({type:"answer"}),y=({visible:e=!1,data:s,callback:t})=>{const{t:u}=(0,o.B)("translation",{keyPrefix:"question_detail.write_answer"}),[y,k]=(0,i.useState)({content:{value:"",isInvalid:!1,errorMsg:""}}),[A,I]=(0,i.useState)(e),[q,C]=(0,i.useState)(""),[P,L]=(0,i.useState)(!1),[S,F]=(0,i.useState)(!1),[E,B]=(0,i.useState)(s.loggedUserRank<100),T=(0,v.T5)("answer"),H=(0,g.j7)((e=>e.write)),[$,M]=(0,i.useState)(!1),[R,W]=(0,i.useState)(!1);(0,h.XB)({when:Boolean(y.content.value)});const z=(0,g.bb)((e=>e.user));w.fj.GetInstance().addAICallback("AIHandle",(e=>{if(!R)return;const s=e.data;JSON.parse(s).user_id===z.id&&(w.fj.GetInstance().removeAIEventListener(),W(!1),window.location.reload())}));const K=()=>{N.save.cancel(),N.remove(),F(!1)};(0,i.useEffect)((()=>{const e=_.KP.get(f.tQ);(null===e||void 0===e?void 0:e.questionId)===s.qid&&null!==e&&void 0!==e&&e.content&&(I(!0),k({content:{value:e.content,isInvalid:!1,errorMsg:""}}),F(!0)),setTimeout((()=>{M(!0)}),100)}),[]),(0,i.useEffect)((()=>{const e=_.KP.get(f.tQ),{content:t}=y;t.value?(N.save({questionId:null===s||void 0===s?void 0:s.qid,content:t.value}),F(!0)):(null===e||void 0===e?void 0:e.questionId)!==s.qid||t.value||K()}),[y.content.value]);const O=(e=!1)=>{const i={question_id:null===s||void 0===s?void 0:s.qid,content:e?"AIReply":y.content.value,html:m.xI.parse(y.content.value)},l=null===T||void 0===T?void 0:T.getCaptcha();null!==l&&void 0!==l&&l.verify&&(i.captcha_code=l.captcha_code,i.captcha_id=l.captcha_id),(e?(0,j.tP)(i):(0,j.V_)(i)).then((async s=>{await(null===T||void 0===T?void 0:T.close()),I(!1),k({content:{value:"",isInvalid:!1,errorMsg:""}}),K(),null===t||void 0===t||t(s.info),e&&(w.fj.GetInstance().removeAIEventListener(),W(!1))})).catch((e=>{if(e.isError){null===T||void 0===T||T.handleCaptchaError(e.list);const s=(0,_.NC)(e,y);k({...s})}}))},Q=()=>{_.ah.tryNormalLogged(!0)&&(()=>{let e=!0;const{content:s}=y;return!s.value||Array.from(s.value.trim()).length<6?(e=!1,y.content={value:s.value,isInvalid:!0,errorMsg:u("characters")}):y.content={value:s.value,isInvalid:!1,errorMsg:""},k({...y}),e})()&&(T?T.check((()=>O())):O())},G=()=>{_.ah.tryNormalLogged(!0)&&(null===s||void 0===s||!s.answered||A?A?Q():I(!0):p.aF.confirm({title:u("confirm_title"),content:u("confirm_info"),confirmText:u("continue"),onConfirm:()=>{I(!0)}}))};return(0,b.jsxs)(l.A,{noValidate:!0,className:"mt-4",children:[(0,b.jsx)(p.Ru,{loading:R,color:"#3f51b5"}),(!s.answered||A)&&(0,b.jsxs)(l.A.Group,{className:"mb-3",children:[(0,b.jsx)(l.A.Label,{children:(0,b.jsx)("h5",{children:u("title")})}),(0,b.jsx)(l.A.Control,{isInvalid:y.content.isInvalid,className:"d-none"}),!A&&!s.answered&&(0,b.jsx)("div",{className:"d-flex",children:(0,b.jsx)(p.fs,{className:"w-100",rows:8,autoFocus:!1,onFocus:e=>{_.ah.tryNormalLogged(!0)?(C("answer"),I(!0),L(!0)):e.currentTarget.blur()}})}),A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.KE,{className:x()("form-control p-0","answer"===q&&"focus"),value:y.content.value,autoFocus:P,onChange:e=>{$&&k({content:{value:e,isInvalid:!1,errorMsg:""}})},onFocus:()=>{C("answer")},onBlur:()=>{C("")}}),(0,b.jsxs)(n.A,{variant:"warning",show:s.loggedUserRank<100&&E,onClose:()=>B(!1),dismissible:!0,className:"mt-3",children:[(0,b.jsx)("p",{children:u("tips.header_1")}),(0,b.jsxs)("ul",{children:[(0,b.jsx)("li",{children:(0,b.jsx)(r.x,{i18nKey:"question_detail.write_answer.tips.li1_1",components:{strong:(0,b.jsx)("strong",{})}})}),(0,b.jsx)("li",{children:u("tips.li1_2")})]}),(0,b.jsx)("p",{children:(0,b.jsx)(r.x,{i18nKey:"question_detail.write_answer.tips.header_2",components:{strong:(0,b.jsx)("strong",{})}})}),(0,b.jsx)("ul",{className:"mb-0",children:(0,b.jsx)("li",{children:u("tips.li2_1")})})]})]}),(0,b.jsx)(l.A.Control.Feedback,{type:"invalid",children:y.content.errorMsg})]}),s.answered&&!A?(0,b.jsx)(c.N_,{to:`/posts/${s.qid}/${s.first_answer_id}/edit`,className:"btn btn-primary",children:u("edit_answer")}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.A,{className:"me-3",onClick:G,children:u("btn_name")}),s.aiAnswered?(0,b.jsx)("div",{className:"lh-1 btn m-0",children:(0,b.jsxs)(d.A,{bg:"secondary",pill:!0,children:[(0,b.jsx)(p.In,{name:"check-circle-fill  me-1"}),u("ai_answered")]})}):(0,b.jsx)(a.A,{onClick:()=>{_.ah.tryNormalLogged(!0)&&(w.fj.GetInstance().addAIEventListener(),W(!0),O(!0))},children:u("btn_ai_name")})]}),s.answered&&!A&&!H.restrict_answer&&(0,b.jsx)(a.A,{onClick:G,className:"ms-2 ",variant:"outline-primary",children:u("add_another_answer")}),S&&(0,b.jsx)(a.A,{variant:"link",className:"ms-2",onClick:()=>{window.confirm(u("discard_confirm",{keyPrefix:"draft"}))&&(K(),k({content:{value:"",isInvalid:!1,errorMsg:""}}))},children:u("discard_draft",{keyPrefix:"btns"})})]})},k=(0,i.memo)(y)},62953:(e,s,t)=>{t.r(s),t.d(s,{Alert:()=>o.default,Answer:()=>l.default,AnswerHead:()=>n.default,ContentLoader:()=>r.default,InviteToAnswer:()=>c.default,Question:()=>i.default,RelatedQuestions:()=>a.default,WriteAnswer:()=>d.default});var i=t(70955),l=t(88462),n=t(77196),a=t(49080),d=t(16211),o=t(19146),r=t(56650),c=t(94586)},55026:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});const i={}},49200:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});const i={}}}]);
//# sourceMappingURL=2953.54e60cf8.chunk.js.map