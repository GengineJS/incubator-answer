"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[4941],{34941:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(28915),s=a(51588),l=a(81801),c=a(47185),r=a(24978),n=a(48058),o=a(97251),u=a(4440),p=a(68179);const d=()=>{const{t:e}=(0,s.B)("translation",{keyPrefix:"admin.general"}),t=(0,c.dj)(),a=(0,r.Ty)((e=>e.update)),{data:d}=(0,n.qu)(),_={title:e("page_title"),required:["name","site_url","contact_email"],properties:{name:{type:"string",title:e("name.label"),description:e("name.text")},site_url:{type:"string",title:e("site_url.label"),description:e("site_url.text")},short_description:{type:"string",title:`${e("short_desc.label")} ${e("optional",{keyPrefix:"form"})}`,description:e("short_desc.text")},description:{type:"string",title:`${e("desc.label")} ${e("optional",{keyPrefix:"form"})}`,description:e("desc.text")},contact_email:{type:"string",title:e("contact_email.label"),description:e("contact_email.text")},check_update:{type:"boolean",title:e("check_update.label"),default:!0}}},h={site_url:{"ui:options":{inputType:"url",validator:t=>{let a;try{a=new URL(t)}catch(i){return e("site_url.validate")}return!(!a||!/^https?:$/.test(a.protocol)||"/"!==a.pathname||""!==a.search||""!==a.hash)||e("site_url.validate")}}},contact_email:{"ui:options":{inputType:"email",validator:t=>!!o.A.email.test(t)||e("contact_email.validate")}},check_update:{"ui:widget":"switch","ui:options":{label:e("check_update.text")}}},[m,v]=(0,i.useState)((0,l.pw)(_));(0,i.useEffect)((()=>{if(!d)return;const e={};Object.keys(m).forEach((t=>{e[t]={...m[t],value:d[t]}})),v({...m,...e})}),[d]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,p.jsx)(l.q,{schema:_,formData:m,onSubmit:i=>{i.preventDefault(),i.stopPropagation();const s={name:m.name.value,description:m.description.value,short_description:m.short_description.value,site_url:m.site_url.value,contact_email:m.contact_email.value,check_update:m.check_update.value};(0,n.G8)(s).then((i=>{t.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"}),i.name&&(m.name.value=i.name,m.description.value=i.description,m.short_description.value=i.short_description,m.site_url.value=i.site_url,m.contact_email.value=i.contact_email,m.check_update.value=i.check_update),v({...m}),a(i)})).catch((e=>{if(e.isError){const t=(0,u.NC)(e,m);v({...t});const a=document.getElementById(e.list[0].error_field);(0,u.qt)(a)}}))},uiSchema:h,onChange:e=>{v(e)}})]})}}}]);
//# sourceMappingURL=4941.6a64b04f.chunk.js.map