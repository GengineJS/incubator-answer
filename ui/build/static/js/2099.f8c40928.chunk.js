"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[2099],{52099:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var l=s(28915),n=s(47760),i=s(98329),t=s(46261),o=s(53799),r=s(18596),c=s(65200),d=s(51588),m=s(31574),p=s(47185),u=s(81801),v=s(24978),h=s(4440),g=s(25831),_=s(48058),x=s(98774),b=s(15480),j=s(76812),y=s(68179);const w=()=>{b.EJ.initIframe();const{t:e}=(0,d.B)("translation",{keyPrefix:"login"}),a=(0,r.Zp)(),[s]=(0,c.ok)(),{user:w,update:f}=(0,v.bb)((e=>e)),I=(0,v.vu)((e=>e.login)),k=(0,v.ym)().agent;let N;null!==k&&void 0!==k&&k.enabled&&null!==k&&void 0!==k&&k.agent_info&&(N=k.agent_info);const A=(!N||N.enabled_original_user_system)&&I.allow_password_login,[C,M]=(0,l.useState)({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}}),[L,E]=(0,l.useState)(1),S=e=>{M({...C,...e})},D=(0,g.T5)("password"),P=(0,b.DO)(),R=P?window.location.pathname:`${window.location.pathname}?${j.yC}`,T=P?"login.info_answer":"login.info_assetbun",q=e=>{e&&e.preventDefault();const s={e_mail:C.e_mail.value,pass:C.pass.value},l=null===D||void 0===D?void 0:D.getCaptcha();null!==l&&void 0!==l&&l.verify&&(s.captcha_code=l.captcha_code,s.captcha_id=l.captcha_id),b.EJ.postMsg({email:s.e_mail,password:s.pass,type:j.Mk.LOGIN},(e=>{(0,_.iD)(s).then((async s=>{var l;await(null===D||void 0===D||null===(l=D.close)||void 0===l?void 0:l.call(D)),f(s),(0,x.setupAppTheme)();if(h.ah.deriveLoginState().isNotActivated?E(2):h.ah.handleLoginRedirect(a),P&&0===e){const e=(0,b.HJ)();window.open(e,"_blank")}})).catch((e=>{if(e.isError){var a;const s=(0,h.NC)(e,C);M({...s}),null===D||void 0===D||null===(a=D.handleCaptchaError)||void 0===a||a.call(D,e.list);const l=document.getElementById(e.list[0].error_field);(0,h.qt)(l)}}))}))};return(0,l.useEffect)((()=>{const e=s.get("status");w.id&&(2===w.mail_status||e)&&E(2)}),[]),(0,p.M4)({title:e("login",{keyPrefix:"page_title"})}),(0,y.jsxs)(n.A,{style:{paddingTop:"4rem",paddingBottom:"5rem"},children:[(0,y.jsx)(u.vU,{}),1===L?(0,y.jsxs)(i.A,{className:"mx-auto",md:6,lg:4,xl:3,children:[(0,y.jsx)(u.Y8,{type:"captcha",slug_name:"captcha_basic",className:"mb-5"}),(0,y.jsx)(u.Y8,{type:"captcha",slug_name:"captcha_google_v2",className:"mb-5"}),N?(0,y.jsx)(u.Y8,{type:"connector",slug_name:"hosting_connector",className:"mb-5"}):(0,y.jsx)(u.Y8,{type:"connector",slug_name:"third_party_connector",className:"mb-5"}),A?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(t.A,{noValidate:!0,onSubmit:async a=>{var s;a.preventDefault(),a.stopPropagation(),(()=>{let a=!0;const{e_mail:s,pass:l}=C;if(s.value||(a=!1,C.e_mail={value:"",isInvalid:!0,errorMsg:e("email.msg.empty")}),l.value||(a=!1,C.pass={value:"",isInvalid:!0,errorMsg:e("password.msg.empty")}),M({...C}),!a){const e=Object.keys(C).filter((e=>C[e].isInvalid)),a=document.getElementById(e[0]);(0,h.qt)(a)}return a})()&&(D?null===D||void 0===D||null===(s=D.check)||void 0===s||s.call(D,(()=>{q()})):q())},children:[(0,y.jsxs)(t.A.Group,{controlId:"email",className:"mb-3",children:[(0,y.jsx)(t.A.Label,{children:e("email.label")}),(0,y.jsx)(t.A.Control,{required:!0,tabIndex:1,type:"email",value:C.e_mail.value,isInvalid:C.e_mail.isInvalid,onChange:e=>S({e_mail:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,y.jsx)(t.A.Control.Feedback,{type:"invalid",children:C.e_mail.errorMsg})]}),(0,y.jsxs)(t.A.Group,{controlId:"pass",className:"mb-3",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsx)(t.A.Label,{children:e("password.label")}),(0,y.jsx)(c.N_,{to:"/users/account-recovery",tabIndex:2,children:(0,y.jsx)("small",{children:e("forgot_pass")})})]}),(0,y.jsx)(t.A.Control,{required:!0,tabIndex:1,type:"password",isInvalid:C.pass.isInvalid,onChange:e=>S({pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,y.jsx)(t.A.Control.Feedback,{type:"invalid",children:C.pass.errorMsg})]}),(0,y.jsx)("div",{className:"d-grid",children:(0,y.jsx)(o.A,{variant:"primary",type:"submit",tabIndex:1,children:e("login",{keyPrefix:"btns"})})})]}),I.allow_new_registrations&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"text-center mt-5",children:(0,y.jsxs)(m.x,{i18nKey:"login.info_sign",ns:"translation",children:["Don't have an account?",(0,y.jsx)(c.N_,{to:h.Rh.getSignUpUrl(),tabIndex:2,onClick:h.Jg.handleRouteLinkClick,children:"Sign up"})]})}),(0,y.jsx)("div",{className:"text-center small mt-1",children:(0,y.jsxs)(m.x,{i18nKey:T,ns:"translation",children:["Need AI help?",(0,y.jsx)(c.N_,{to:R,onClick:()=>{const e=new URL(window.location.pathname),a=`${e.protocol}//${e.hostname}`;window.location.href=a+R},children:"Learn earn"})]})})]})]}):null]}):null,2===L&&(0,y.jsx)(u.RP,{visible:2===L})]})},f=l.memo(w)}}]);
//# sourceMappingURL=2099.f8c40928.chunk.js.map