"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[4586,4651,5190,5026,9200],{75190:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var n=a(28915),t=a(99205),l=a(46261),i=a(51588),r=a(24978),c=a(48058),o=a(81801),d=(a(55026),a(68179));const u=({selectedPeople:e=[],visible:s=!1,onSelect:a,saveInviteUsers:u})=>{const{user:h}=(0,r.bb)(),{t:v}=(0,i.B)("translation",{keyPrefix:"invite_to_answer"}),[m,x]=(0,n.useState)([]),[p,f]=(0,n.useState)(-1),[j,y]=(0,n.useState)(""),N=s=>{s?(0,c.c5)(s).then((s=>{(s=>{const a=[];s.forEach((s=>{h&&1===h.role_id&&h.username===s.username||null!==e&&void 0!==e&&e.find((e=>e.username===s.username))||a.push(s)})),x([...e,...a])})(s)})):x([...e])},w=e=>{if(e<0||e>=m.length)return;const s=m[e];s&&a(s)};return(0,n.useEffect)((()=>{s&&e.length>0&&x(e),s||(f(-1),y(""),x([]))}),[s]),s?(0,d.jsx)(t.A,{autoClose:"outside",show:!0,className:"people-dropdown",onSelect:w,onKeyDown:e=>{if(e.stopPropagation(),null===m||void 0===m||!m.length)return;const{keyCode:s}=e;38===s&&p>0&&f(p-1),40===s&&p<m.length-1&&f(p+1),13===s&&p>-1&&(e.preventDefault(),w(p))},onToggle:e=>{e||u()},children:(0,d.jsxs)(t.A.Menu,{renderOnMount:!0,show:!0,className:"w-100 py-0 position-relative",children:[(0,d.jsx)("div",{className:"p-3",children:(0,d.jsx)(l.A.Control,{type:"search",autoFocus:!0,placeholder:v("search"),value:j,onChange:e=>{const s=e.target.value;y(s),N(s)}})}),(0,d.jsx)("div",{className:""+(m.length>0?"py-2 border-top":""),children:m.map(((s,a)=>(0,d.jsx)(t.A.Item,{eventKey:a,onFocus:()=>{f(a)},active:a===p,children:(0,d.jsxs)(l.A.Check,{type:"checkbox",id:s.username,className:"position-relative",children:[(0,d.jsx)(l.A.Check.Input,{type:"checkbox",tabIndex:-1,checked:Boolean(null===e||void 0===e?void 0:e.find((e=>e.id===s.id))),onChange:()=>{}}),(0,d.jsx)("div",{className:"check-cover"}),(0,d.jsxs)(l.A.Check.Label,{className:"d-flex align-items-center text-nowrap",children:[(0,d.jsx)(o.eu,{avatar:s.avatar,size:"24",alt:s.display_name,className:"rounded-1"}),(0,d.jsxs)("div",{className:"d-flex flex-wrap text-truncate",children:[(0,d.jsx)("span",{className:"ms-2 text-truncate",children:s.display_name}),(0,d.jsxs)("small",{className:"text-secondary text-truncate ms-2",children:["@",s.username]})]})]})]})},s.username)))})]})}):null}},94586:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var n=a(28915),t=a(16413),l=a(53799),i=a(51588),r=a(65200),c=a(14577),o=a.n(c),d=a(81801),u=a(48058),h=a(25831),v=a(75190),m=(a(49200),a(68179));const x=({questionId:e,readOnly:s=!1})=>{const{t:a}=(0,i.B)("translation",{keyPrefix:"invite_to_answer"}),[c,x]=(0,n.useState)(!1),[p,f]=(0,n.useState)([]),j=(0,h.T5)("invitation_answer"),y=()=>{const s=p.map((e=>e.username)),a={};null===j||void 0===j||j.resolveCaptchaReq(a),(0,u.q_)(e,s,a).then((async()=>{await(null===j||void 0===j?void 0:j.close()),x(!1)})).catch((e=>{e.isError&&(null===j||void 0===j||j.handleCaptchaError(e.list))}))};(0,n.useEffect)((()=>{e&&(0,u.dI)(e).then((e=>{f(e)})).catch((()=>{p||f([])}))}),[e]);return s&&0===(null===p||void 0===p?void 0:p.length)?null:(0,m.jsxs)(t.A,{className:"invite-answer-card position-relative border-0 mb-4",children:[(0,m.jsxs)(t.A.Header,{className:"text-nowrap d-flex justify-content-between text-capitalize",children:[a("title"),!s&&(0,m.jsx)(l.A,{onClick:()=>x(!0),variant:"link",className:"p-0",children:a("edit",{keyPrefix:"btns"})})]}),(0,m.jsx)(t.A.Body,{className:o()("position-relative"),children:(0,m.jsxs)("div",{className:o()("d-flex align-items-center flex-wrap m-n1"),children:[null===p||void 0===p?void 0:p.map((e=>(0,m.jsxs)(r.N_,{to:`/users/${e.username}`,className:"mx-2 my-1 d-inline-flex flex-nowrap",children:[(0,m.jsx)(d.eu,{avatar:e.avatar,size:"24",alt:e.display_name,className:"rounded-1"}),(0,m.jsx)("small",{className:"ms-2",children:e.display_name})]},e.username))),0===(null===p||void 0===p?void 0:p.length)?(0,m.jsx)("div",{className:"text-muted",children:a("desc")}):null]})}),c&&(0,m.jsx)(v.default,{visible:c,selectedPeople:p,onSelect:e=>{const s=null===p||void 0===p?void 0:p.find((s=>s.id===e.id));let a=[...p||[]];var n;s?a=null===(n=a)||void 0===n?void 0:n.filter((s=>s.id!==e.id)):a.push(e);f(a)},saveInviteUsers:()=>{p&&(j?j.check((()=>y())):y())}})]})},p=(0,n.memo)(x)},55026:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});const n={}},49200:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});const n={}}}]);
//# sourceMappingURL=4586.7c5e464b.chunk.js.map