"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[3228],{13228:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(28915),i=a(51588),l=a(47185),u=a(24978),o=a(81801),s=a(76812),g=a(48058),r=a(98774),d=a(4440),c=a(68179);const m=()=>{const{t:e}=(0,i.B)("translation",{keyPrefix:"admin.interface"}),t=u.$n.getState().interface,a=(0,l.dj)(),[m,p]=(0,n.useState)(),{data:v}=(0,g.Zo)(),f={title:e("page_title"),properties:{language:{type:"string",title:e("language.label"),description:e("language.text"),enum:null===m||void 0===m?void 0:m.map((e=>e.value)),enumNames:null===m||void 0===m?void 0:m.map((e=>e.label)),default:(null===v||void 0===v?void 0:v.language)||t.language},time_zone:{type:"string",title:e("time_zone.label"),description:e("time_zone.text"),default:(null===v||void 0===v?void 0:v.time_zone)||s.GI}}},[h,_]=(0,n.useState)({language:{value:(null===v||void 0===v?void 0:v.language)||t.language,isInvalid:!1,errorMsg:""},time_zone:{value:(null===v||void 0===v?void 0:v.time_zone)||s.GI,isInvalid:!1,errorMsg:""}});(0,n.useEffect)((()=>{if(v){const e={};Object.keys(v).forEach((t=>{e[t]={...h[t],value:v[t]}})),_({...h,...e})}}),[v]),(0,n.useEffect)((()=>{(async()=>{const e=await(0,r.loadLanguageOptions)(!0);p(e)})()}),[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h3",{className:"mb-4",children:e("page_title")}),(0,c.jsx)(o.q,{schema:f,uiSchema:{language:{"ui:widget":"select"},time_zone:{"ui:widget":"timezone"}},formData:h,onSubmit:t=>{if(t.preventDefault(),t.stopPropagation(),!1===(()=>{let t=!0;const{language:a}=h,n={...h};return a.value||(t=!1,n.language={value:"",isInvalid:!0,errorMsg:e("language.msg")}),_({...n}),t})())return;const n={language:h.language.value,time_zone:h.time_zone.value};(0,g.Lt)(n).then((()=>{u.$n.getState().update(n),(0,r.setupAppLanguage)(),(0,r.setupAppTimeZone)(),(0,g.aV)().then((e=>{u.bb.getState().update(e)})),a.onShow({msg:e("update",{keyPrefix:"toast"}),variant:"success"})})).catch((e=>{if(e.isError){const t=(0,d.NC)(e,h);_({...t});const a=document.getElementById(e.list[0].error_field);(0,d.qt)(a)}}))},onChange:e=>{_(e)}})]})}}}]);
//# sourceMappingURL=3228.d26a23d8.chunk.js.map