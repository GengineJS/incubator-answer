"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[9210,7093,8040,9757],{47093:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var l=s(28915),n=s(46261),r=s(53799),i=s(51588),t=s(47185),o=s(25831),d=s(48058),c=s(4440),v=s(68179);const u=()=>{var e;const{t:a}=(0,i.B)("translation",{keyPrefix:"settings.account"}),[s,u]=(0,l.useState)(1),[p,m]=(0,l.useState)({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}}),[h,g]=(0,l.useState)(),_=(0,t.dj)(),x=(0,o.T5)("edit_userinfo");(0,l.useEffect)((()=>{(0,d.aV)().then((e=>{g(e)}))}),[]);const f=e=>{m({...p,...e})},b=e=>{e&&e.preventDefault();const s={e_mail:p.e_mail.value,pass:p.pass.value},l=null===x||void 0===x?void 0:x.getCaptcha();null!==l&&void 0!==l&&l.verify&&(s.captcha_code=l.captcha_code,s.captcha_id=l.captcha_id),(0,d.BZ)(s).then((async()=>{await(null===x||void 0===x?void 0:x.close()),u(1),_.onShow({msg:a("change_email_info"),variant:"warning"}),m({e_mail:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""}})})).catch((e=>{if(e.isError){null===x||void 0===x||x.handleCaptchaError(e.list);const a=(0,c.NC)(e,p);m({...a});const s=document.getElementById(e.list[0].error_field);(0,c.qt)(s)}}))};return(0,v.jsxs)("div",{children:[1===s&&(0,v.jsxs)(n.A,{children:[(0,v.jsxs)(n.A.Group,{controlId:"oldEmail",className:"mb-3",children:[(0,v.jsx)(n.A.Label,{children:a("email.label")}),(0,v.jsx)(n.A.Control,{type:"text",disabled:!0,defaultValue:null===h||void 0===h||null===(e=h.e_mail)||void 0===e?void 0:e.replace(/(.{2})(.+)(@.+)/i,"$1****$3")})]}),(0,v.jsx)(r.A,{variant:"outline-secondary",onClick:()=>{u(2)},children:a("change_email_btn")})]}),2===s&&(0,v.jsxs)(n.A,{noValidate:!0,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),(()=>{let e=!0;const{e_mail:s,pass:l}=p;if(s.value||(e=!1,p.e_mail={value:"",isInvalid:!0,errorMsg:a("new_email.msg")}),l.value||(e=!1,p.pass={value:"",isInvalid:!0,errorMsg:a("pass.msg")}),m({...p}),!e){const e=Object.keys(p).filter((e=>p[e].isInvalid)),a=document.getElementById(e[0]);(0,c.qt)(a)}return e})()&&(x?x.check((()=>{b()})):b())},children:[(0,v.jsxs)(n.A.Group,{controlId:"pass",className:"mb-3",children:[(0,v.jsx)(n.A.Label,{children:a("pass.label")}),(0,v.jsx)(n.A.Control,{autoComplete:"new-password",required:!0,type:"password",isInvalid:p.pass.isInvalid,onChange:e=>f({pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,v.jsx)(n.A.Control.Feedback,{type:"invalid",children:p.pass.errorMsg})]}),(0,v.jsxs)(n.A.Group,{controlId:"e_mail",className:"mb-3",children:[(0,v.jsx)(n.A.Label,{children:a("new_email.label")}),(0,v.jsx)(n.A.Control,{autoComplete:"off",required:!0,type:"email",placeholder:"",value:p.e_mail.value,isInvalid:p.e_mail.isInvalid,onChange:e=>f({e_mail:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,v.jsx)(n.A.Control.Feedback,{type:"invalid",children:p.e_mail.errorMsg})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(r.A,{type:"submit",variant:"primary",className:"me-2",children:a("save",{keyPrefix:"btns"})}),(0,v.jsx)(r.A,{variant:"link",onClick:()=>u(1),children:a("cancel",{keyPrefix:"btns"})})]})]})]})},p=l.memo(u)},88040:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var l=s(28915),n=s(46261),r=s(53799),i=s(51588),t=s(14577),o=s.n(t),d=s(47185),c=s(25831),v=s(48058),u=s(4440),p=s(24978),m=s(68179);const h=()=>{const{t:e}=(0,i.B)("translation",{keyPrefix:"settings.account"}),{user:a}=(0,p.bb)(),[s,t]=(0,l.useState)(!1),h=(0,d.dj)(),[g,_]=(0,l.useState)({old_pass:{value:"",isInvalid:!1,errorMsg:""},pass:{value:"",isInvalid:!1,errorMsg:""},pass2:{value:"",isInvalid:!1,errorMsg:""}}),x=(0,c.T5)("edit_userinfo"),f=()=>{t((e=>!e))},b=e=>{_({...g,...e})},j=a=>{a&&a.preventDefault();const s={old_pass:g.old_pass.value,pass:g.pass.value},l=null===x||void 0===x?void 0:x.getCaptcha();null!==l&&void 0!==l&&l.verify&&(s.captcha_code=l.captcha_code,s.captcha_id=l.captcha_id),(0,v.Sx)(s).then((async()=>{await(null===x||void 0===x?void 0:x.close()),h.onShow({msg:e("update_password",{keyPrefix:"toast"}),variant:"success"}),f()})).catch((e=>{if(e.isError){null===x||void 0===x||x.handleCaptchaError(e.list);const a=(0,u.NC)(e,g);_({...a});const s=document.getElementById(e.list[0].error_field);(0,u.qt)(s)}}))};return(0,m.jsx)("div",{className:"mt-5",children:s?(0,m.jsxs)(n.A,{noValidate:!0,onSubmit:s=>{s.preventDefault(),s.stopPropagation(),(()=>{let s=!0;const{old_pass:l,pass:n,pass2:r}=g;if(!l.value&&a.have_password&&(s=!1,g.old_pass={value:"",isInvalid:!0,errorMsg:e("current_pass.msg.empty")}),n.value||(s=!1,g.pass={value:"",isInvalid:!0,errorMsg:e("current_pass.msg.empty")}),s&&n.value&&n.value.length<8&&(s=!1,g.pass={value:n.value,isInvalid:!0,errorMsg:e("current_pass.msg.length")}),r.value||(s=!1,g.pass2={value:"",isInvalid:!0,errorMsg:e("current_pass.msg.empty")}),s&&r.value&&r.value.length<8&&(s=!1,g.pass2={value:r.value,isInvalid:!0,errorMsg:e("current_pass.msg.length")}),s&&n.value&&r.value&&n.value!==r.value&&(s=!1,g.pass2={value:r.value,isInvalid:!0,errorMsg:e("current_pass.msg.different")}),_({...g}),!s){const e=Object.keys(g).filter((e=>g[e].isInvalid)),a=document.getElementById(e[0]);(0,u.qt)(a)}return s})()&&(x?x.check((()=>{j()})):j())},children:[(0,m.jsxs)(n.A.Group,{controlId:"old_pass",className:o()("mb-3",a.have_password?"":"d-none"),children:[(0,m.jsx)(n.A.Label,{children:e("current_pass.label")}),(0,m.jsx)(n.A.Control,{autoComplete:"off",required:!0,type:"password",placeholder:"",isInvalid:g.old_pass.isInvalid,onChange:e=>b({old_pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,m.jsx)(n.A.Control.Feedback,{type:"invalid",children:g.old_pass.errorMsg})]}),(0,m.jsxs)(n.A.Group,{controlId:"new_pass",className:"mb-3",children:[(0,m.jsx)(n.A.Label,{children:e("new_pass.label")}),(0,m.jsx)(n.A.Control,{autoComplete:"off",required:!0,type:"password",isInvalid:g.pass.isInvalid,onChange:e=>b({pass:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,m.jsx)(n.A.Control.Feedback,{type:"invalid",children:g.pass.errorMsg})]}),(0,m.jsxs)(n.A.Group,{controlId:"pass2",className:"mb-3",children:[(0,m.jsx)(n.A.Label,{children:e("pass_confirm.label")}),(0,m.jsx)(n.A.Control,{autoComplete:"off",required:!0,type:"password",isInvalid:g.pass2.isInvalid,onChange:e=>b({pass2:{value:e.target.value,isInvalid:!1,errorMsg:""}})}),(0,m.jsx)(n.A.Control.Feedback,{type:"invalid",children:g.pass2.errorMsg})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(r.A,{type:"submit",variant:"primary",className:"me-2",children:e("save",{keyPrefix:"btns"})}),(0,m.jsx)(r.A,{variant:"link",onClick:()=>f(),children:e("cancel",{keyPrefix:"btns"})})]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.A.Label,{children:e("password_title")}),(0,m.jsx)("br",{}),(0,m.jsx)(r.A,{variant:"outline-secondary",type:"submit",onClick:()=>{f()},children:e("change_pass_btn")})]})})},g=l.memo(h)},99757:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var l=s(28915),n=s(53799),r=s(51588),i=s(81801),t=s(48058),o=s(47185),d=s(4440),c=s(1868),v=s(76812),u=s(68179);const p=()=>{const{data:e,mutate:a}=(0,t.sJ)(),s=(0,o.dj)(),{t:l}=(0,r.B)("translation",{keyPrefix:"settings.my_logins"}),{t:p}=(0,r.B)("translation",{keyPrefix:"oauth"});return null!==e&&void 0!==e&&e.length?(0,u.jsxs)("div",{className:"mt-5",children:[(0,u.jsx)("div",{className:"form-label",children:l("title")}),(0,u.jsx)("small",{className:"form-text mt-0",children:l("label")}),(0,u.jsx)("div",{className:"d-grid gap-2 mt-3",children:null===e||void 0===e?void 0:e.map((e=>(0,u.jsx)("div",{children:(0,u.jsxs)(n.A,{variant:e.binding?"outline-danger":"outline-secondary",href:e.link,onClick:n=>((e,n)=>{n.binding?(e.preventDefault(),i.aF.confirm({title:l("modal_title"),content:l("modal_content"),confirmBtnVariant:"danger",confirmText:l("modal_confirm_btn"),onConfirm:()=>{(0,t.lM)({external_id:n.external_id}).then((()=>{a(),s.onShow({msg:l("remove_success"),variant:"success"})}))}})):c.A.set(v.Vz,window.location.pathname)})(n,e),children:[(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,d.Bf)(e.icon,"btnSvg me-2")}}),(0,u.jsx)("span",{children:p(e.binding?"remove":"connect",{auth_name:e.name})})]})},e.name)))})]}):null},m=(0,l.memo)(p)},79210:(e,a,s)=>{s.r(a),s.d(a,{ModifyEmail:()=>l.default,ModifyPassword:()=>n.default,MyLogins:()=>r.default});var l=s(47093),n=s(88040),r=s(99757)}}]);
//# sourceMappingURL=9210.5a7685f9.chunk.js.map