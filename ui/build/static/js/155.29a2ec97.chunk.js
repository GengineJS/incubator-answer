"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[155],{70155:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var s=l(28915),i=l(13015),r=l(98329),t=l(46261),d=l(53799),n=l(16413),o=l(18596),m=l(51588),u=l(17534),c=l.n(u),v=l(14577),g=l.n(v),p=l(47185),y=l(81801),_=l(24978),f=l(76812),x=l(48058),h=l(68179);const N={displayName:{value:"",isInvalid:!1,errorMsg:""},slugName:{value:"",isInvalid:!1,errorMsg:""},description:{value:"",isInvalid:!1,errorMsg:""},editSummary:{value:"",isInvalid:!1,errorMsg:""}},j=()=>{const{role_id:e=1}=(0,_.bb)((e=>e.user)),{tagId:a}=(0,o.g)(),l=(0,o.Zp)(),{t:u}=(0,m.B)("translation",{keyPrefix:"edit_tag"}),[v,j]=(0,s.useState)(""),{data:b}=(0,x.MF)({id:a}),{data:A=[]}=(0,x.Of)(null===b||void 0===b?void 0:b.tag_id),[k,I]=(0,s.useState)(N),[C,M]=(0,s.useState)(N),[P,S]=(0,s.useState)(!1),w=(0,s.useRef)({getHtml:()=>""});(0,p.XB)({when:P}),(0,s.useEffect)((()=>{N.displayName.value=(null===b||void 0===b?void 0:b.display_name)||"",N.slugName.value=(null===b||void 0===b?void 0:b.slug_name)||"",N.description.value=(null===b||void 0===b?void 0:b.original_text)||"",I(N),M(N)}),[b]),(0,s.useEffect)((()=>{const{displayName:e,slugName:a,description:l,editSummary:s}=k,{displayName:i,slugName:r,description:t}=C;i.value!==e.value||r.value!==a.value||t.value!==l.value||s.value?S(!0):S(!1)}),[k.displayName.value,k.slugName.value,k.description.value,k.editSummary.value]);return(0,p.M4)({title:u("edit_tag",{keyPrefix:"page_title"})}),(0,h.jsxs)("div",{className:"pt-4 mb-5",children:[(0,h.jsx)("h3",{className:"mb-4",children:u("title")}),(0,h.jsxs)(i.A,{children:[(0,h.jsx)(r.A,{className:"page-main flex-auto",children:(0,h.jsxs)(t.A,{noValidate:!0,onSubmit:e=>{if(S(!1),e.preventDefault(),e.stopPropagation(),!(()=>{let e=!0;const{displayName:a,slugName:l}=k;return a.value?a.value.length>f.zw?(e=!1,k.displayName={value:a.value,isInvalid:!0,errorMsg:u("form.fields.display_name.msg.range",{keyPrefix:"tag_modal"})}):k.displayName={value:a.value,isInvalid:!1,errorMsg:""}:(e=!1,k.displayName={value:"",isInvalid:!0,errorMsg:u("form.fields.display_name.msg.empty",{keyPrefix:"tag_modal"})}),l.value?l.value.length>f.zw?(e=!1,k.slugName={value:l.value,isInvalid:!0,errorMsg:u("form.fields.slug_name.msg.range",{keyPrefix:"tag_modal"})}):k.slugName={value:l.value,isInvalid:!1,errorMsg:""}:(e=!1,k.slugName={value:"",isInvalid:!0,errorMsg:u("form.fields.slug_name.msg.empty",{keyPrefix:"tag_modal"})}),I({...k}),e})())return;const a={display_name:k.displayName.value,slug_name:k.slugName.value,original_text:k.description.value,parsed_text:w.current.getHtml(),tag_id:null===b||void 0===b?void 0:b.tag_id,edit_summary:k.editSummary.value};(0,x.p_)(a).then((e=>{l(`/tags/${encodeURIComponent(k.slugName.value)}/info`,{replace:!0,state:{isReview:e.wait_for_review}})}))},children:[(0,h.jsxs)(t.A.Group,{controlId:"revision",className:"mb-3",children:[(0,h.jsx)(t.A.Label,{children:u("form.fields.revision.label",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Select,{onChange:e=>{const a=e.target.value,l=A[a];k.description.value=l.content.original_text,k.displayName.value=l.content.display_name,k.slugName.value=l.content.slug_name,M({...k}),I({...k})},children:A.map((({create_at:e,reason:a,user_info:l},s)=>{const i=c()(1e3*e).tz().format(u("long_date_with_time",{keyPrefix:"dates"}));return(0,h.jsx)("option",{value:s,children:`${i} - ${l.display_name} - ${a||(s===A.length-1?u("default_first_reason"):u("default_reason"))}`},`${e}`)}))})]}),(0,h.jsxs)(t.A.Group,{controlId:"display_name",className:"mb-3",children:[(0,h.jsx)(t.A.Label,{children:u("form.fields.display_name.label",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Control,{value:k.displayName.value,isInvalid:k.displayName.isInvalid,disabled:2!==e&&3!==e,onChange:e=>{I({...k,displayName:{...k.displayName,value:e.currentTarget.value}})}}),(0,h.jsx)(t.A.Control.Feedback,{type:"invalid",children:k.displayName.errorMsg})]}),(0,h.jsxs)(t.A.Group,{controlId:"slug_name",className:"mb-3",children:[(0,h.jsx)(t.A.Label,{children:u("form.fields.slug_name.label",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Control,{value:k.slugName.value,isInvalid:k.slugName.isInvalid,disabled:2!==e&&3!==e,onChange:e=>{I({...k,slugName:{...k.slugName,value:e.currentTarget.value}})}}),(0,h.jsx)(t.A.Text,{as:"div",children:u("form.fields.slug_name.desc",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Control.Feedback,{type:"invalid",children:k.slugName.errorMsg})]}),(0,h.jsxs)(t.A.Group,{controlId:"description",className:"mt-4",children:[(0,h.jsx)(t.A.Label,{children:u("form.fields.desc.label",{keyPrefix:"tag_modal"})}),(0,h.jsx)(y.KE,{value:k.description.value,onChange:e=>I({...k,description:{...k.description,value:e}}),className:g()("form-control p-0","description"===v&&"focus"),onFocus:()=>{j("description")},onBlur:()=>{j("")},ref:w}),(0,h.jsx)(t.A.Control,{value:k.description.value,type:"text",isInvalid:k.description.isInvalid,readOnly:!0,hidden:!0}),(0,h.jsx)(t.A.Control.Feedback,{type:"invalid",children:k.description.errorMsg})]}),(0,h.jsxs)(t.A.Group,{controlId:"edit_summary",className:"my-3",children:[(0,h.jsx)(t.A.Label,{children:u("form.fields.edit_summary.label",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Control,{type:"text",defaultValue:k.editSummary.value,isInvalid:k.editSummary.isInvalid,onChange:e=>{I({...k,editSummary:{...k.editSummary,value:e.currentTarget.value}})},placeholder:u("form.fields.edit_summary.placeholder",{keyPrefix:"tag_modal"})}),(0,h.jsx)(t.A.Control.Feedback,{type:"invalid",children:k.editSummary.errorMsg})]}),(0,h.jsxs)("div",{className:"mt-3",children:[(0,h.jsx)(d.A,{type:"submit",children:u("btn_save_edits")}),(0,h.jsx)(d.A,{variant:"link",className:"ms-2",onClick:()=>{l(-1)},children:u("btn_cancel")})]})]})}),(0,h.jsx)(r.A,{className:"page-right-side mt-4 mt-xl-0",children:(0,h.jsxs)(n.A,{children:[(0,h.jsx)(n.A.Header,{children:u("title",{keyPrefix:"how_to_format"})}),(0,h.jsx)(n.A.Body,{className:"fmt small",dangerouslySetInnerHTML:{__html:u("desc",{keyPrefix:"how_to_format"})}})]})})]})]})}}}]);
//# sourceMappingURL=155.29a2ec97.chunk.js.map