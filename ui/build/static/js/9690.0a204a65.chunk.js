"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[9690,4651,6724],{6762:(e,i,l)=>{l.r(i),l.d(i,{default:()=>p});var n=l(28915),d=l(13015),o=l(98329),a=l(18596),s=l(65200),t=l(51588),u=l(81801),r=l(24978),v=l(4440),c=l(47185),_=l(48058),f=l(62953),m=(l(46724),l(68179));const p=()=>{var e,i,l;const p=(0,a.Zp)(),{t:w}=(0,t.B)("translation"),{qid:g="",slugPermalink:y=""}=(0,a.g)();let{aid:h=""}=(0,a.g)();!h&&y&&(h=y);const[x]=(0,s.ok)(),j=Number(x.get("page")||0),N=x.get("order")||"",[k,b]=(0,n.useState)(null),[A,S]=(0,n.useState)(!0),{isSkeletonShow:q}=(0,c.Ub)(A),[E,P]=(0,n.useState)({count:-1,list:[]}),{setUsers:T}=(0,c.L7)(),z=(0,r.bb)((e=>e.user)),I=(null===z||void 0===z?void 0:z.username)===(null===k||void 0===k||null===(e=k.user_info)||void 0===e?void 0:e.username),L=2===(null===z||void 0===z?void 0:z.role_id),M=3===(null===z||void 0===z?void 0:z.role_id),B=Boolean(null===z||void 0===z?void 0:z.access_token),C=null===z||void 0===z?void 0:z.rank,R=(0,a.zy)();(0,n.useEffect)((()=>{var e;if(null!==(e=R.state)&&void 0!==e&&e.isReview){r.ZW.getState().show({msg:w("review",{keyPrefix:"toast"}),variant:"warning"});const e={...R};delete e.state,window.history.replaceState(null,"",e.pathname)}}),[R.state]);const U=null===E||void 0===E?void 0:E.list,H=async()=>{const e=await(0,_.oo)({order:"updated"===N||"created"===N?N:"default",question_id:g,page:1,page_size:999});if(e){var i;if(e.list=null===(i=e.list)||void 0===i?void 0:i.filter((e=>{var i;return 10===e.status&&((null===e||void 0===e||null===(i=e.user_info)||void 0===i?void 0:i.username)!==(null===z||void 0===z?void 0:z.username)&&!L||h!==e.id)?null:e})),P({...e,count:e.list.length}),j>0||N){const e=document.getElementById("answerHeader");(0,v.qt)(e)}e.list.forEach((e=>{var i,l,n,d;T([{displayName:null===(i=e.user_info)||void 0===i?void 0:i.display_name,userName:null===(l=e.user_info)||void 0===l?void 0:l.username},{displayName:null===e||void 0===e||null===(n=e.update_user_info)||void 0===n?void 0:n.display_name,userName:null===e||void 0===e||null===(d=e.update_user_info)||void 0===d?void 0:d.username}])}))}},Q=async()=>{S(!0);try{const c=await(0,_.on)(g);var e,i,l,n,d,o,a,s,t,u,r,v;if(c)T([{id:null===(e=c.user_info)||void 0===e?void 0:e.id,displayName:null===(i=c.user_info)||void 0===i?void 0:i.display_name,userName:null===(l=c.user_info)||void 0===l?void 0:l.username,avatar_url:null===(n=c.user_info)||void 0===n?void 0:n.avatar},{id:null===c||void 0===c||null===(d=c.update_user_info)||void 0===d?void 0:d.id,displayName:null===c||void 0===c||null===(o=c.update_user_info)||void 0===o?void 0:o.display_name,userName:null===c||void 0===c||null===(a=c.update_user_info)||void 0===a?void 0:a.username,avatar_url:null===c||void 0===c||null===(s=c.update_user_info)||void 0===s?void 0:s.avatar},{id:null===c||void 0===c||null===(t=c.last_answered_user_info)||void 0===t?void 0:t.id,displayName:null===c||void 0===c||null===(u=c.last_answered_user_info)||void 0===u?void 0:u.display_name,userName:null===c||void 0===c||null===(r=c.last_answered_user_info)||void 0===r?void 0:r.username,avatar_url:null===c||void 0===c||null===(v=c.last_answered_user_info)||void 0===v?void 0:v.avatar}]),b(c);S(!1)}catch(c){S(!1)}},W=e=>{if("delete_question"!==e){if("default"===e)return(0,v.Mv)(),void Q();"delete_answer"===e&&Q(),H()}else setTimeout((()=>{p("/",{replace:!0})}),1e3)};(0,n.useEffect)((()=>{g&&((0,v.Mv)(),Q(),H())}),[g]),(0,n.useEffect)((()=>{(j||N)&&H()}),[j,N]),(0,c.M4)({title:null===k||void 0===k?void 0:k.title,description:null===k||void 0===k?void 0:k.description,keywords:null===k||void 0===k?void 0:k.tags.map((e=>e.slug_name)).join(",")});const Z=null===k||void 0===k?void 0:k.id;let D=!1;if(Z&&Array.isArray(k.extends_actions)){k.extends_actions.find((e=>"invite_other_to_answer"===e.action))&&(D=!0)}return(0,m.jsxs)(d.A,{className:"questionDetailPage pt-4 mb-5",children:[(0,m.jsxs)(o.A,{className:"page-main flex-auto",children:[(null===k||void 0===k||null===(i=k.operation)||void 0===i?void 0:i.level)&&(0,m.jsx)(f.Alert,{data:k.operation}),q?(0,m.jsx)(f.ContentLoader,{}):(0,m.jsx)(f.Question,{data:k,initPage:W,hasAnswer:E.count>0,isLogged:B}),!A&&E.count>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.AnswerHead,{count:E.count,order:N}),null===U||void 0===U?void 0:U.map((e=>(0,m.jsx)(f.Answer,{acceptedId:null===k||void 0===k?void 0:k.accepted_answer_id,aid:h,score:null===k||void 0===k?void 0:k.score,data:e,questionTitle:(null===k||void 0===k?void 0:k.title)||"",canAccept:I||L||M,callback:W,isLogged:B},null===e||void 0===e?void 0:e.id)))]}),!A&&Math.ceil(E.count/15)>1&&(0,m.jsx)("div",{className:"d-flex justify-content-center answer-item pt-4",children:(0,m.jsx)(u.dK,{currentPage:Number(j||1),pageSize:15,totalSize:(null===E||void 0===E?void 0:E.count)||0})}),!A&&2!==Number(null===k||void 0===k?void 0:k.status)&&!(null!==k&&void 0!==k&&null!==(l=k.operation)&&void 0!==l&&l.type)&&(0,m.jsx)(f.WriteAnswer,{data:{qid:g,aiAnswered:null===k||void 0===k?void 0:k.ai_answer_replied,answered:null===k||void 0===k?void 0:k.answered,loggedUserRank:C,first_answer_id:null===k||void 0===k?void 0:k.first_answer_id},callback:e=>{P({count:E.count+1,list:[...E.list,e]}),k&&b({...k,answered:!0,first_answer_id:k.first_answer_id?k.first_answer_id:e.id})}})]}),(0,m.jsxs)(o.A,{className:"page-right-side mt-4 mt-xl-0",children:[(0,m.jsx)(u._J,{}),Z?(0,m.jsx)(f.InviteToAnswer,{questionId:k.id,readOnly:!D}):null,(0,m.jsx)(f.RelatedQuestions,{id:(null===k||void 0===k?void 0:k.id)||""})]})]})}},46724:(e,i,l)=>{l.r(i),l.d(i,{default:()=>n});const n={}}}]);
//# sourceMappingURL=9690.0a204a65.chunk.js.map