"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[3840],{63840:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var n=i(28915),s=i(16413),l=i(83556),a=i(10808),o=i(53799),r=i(65200),d=i(51588),c=i(81801),u=i(48058),g=i(34202),v=i(4440),h=i(68179);const x=({refreshCount:e})=>{const{t:t}=(0,d.B)("translation",{keyPrefix:"page_review"}),[i,x]=(0,n.useState)(!1),[_,p]=(0,n.useState)(!1),[m,j]=(0,n.useState)(1),[b,f]=(0,n.useState)(),w=null===b||void 0===b?void 0:b.list[0],{info:y,type:k,unreviewed_info:A}=w||{info:null,type:"",unreviewed_info:null},N=e=>{(0,u.Xm)(e).then((t=>{((e,t)=>{const{count:i,list:n=[]}=e;if(!n.length&&i&&1!==m)return j(t=1),void N(t);t!==m&&j(t),f(e),n.length||p(!0),setTimeout((()=>{(0,v.Mv)()}),150)})(t,e)}))},T=null===A||void 0===A?void 0:A.content;let C="",S="",q=null===A||void 0===A?void 0:A.reason;const L=null===A||void 0===A?void 0:A.user_info,P=null===A||void 0===A?void 0:A.create_at;if("question"===k)C=g.w.questionLanding(null===y||void 0===y?void 0:y.object_id,null===y||void 0===y?void 0:y.url_title),S=null===y||void 0===y?void 0:y.object_id,q||=t("edit_question");else if("answer"===k)C=g.w.answerLanding({questionId:A.content.question_id,slugTitle:null===y||void 0===y?void 0:y.url_title,answerId:A.object_id}),S=A.object_id,q||=t("edit_answer");else if("tag"===k){const e=A.content;C=g.w.tagLanding(e.slug_name),S=(null===e||void 0===e?void 0:e.tag_id)||e.slug_name,q||=t("edit_tag")}if((0,n.useEffect)((()=>{N(m)}),[]),_)return null;let z={},B={},D={showTitle:!0,showTagUrlSlug:!0};return"question"===k&&y&&T&&"content"in T&&(z={title:T.title,original_text:T.content,tags:T.tags},B={title:y.title,original_text:y.content,tags:y.tags}),"answer"===k&&y&&T&&"content"in T&&(z={original_text:T.content},B={original_text:y.content}),"tag"===k&&y&&T&&(z={original_text:T.original_text},B={original_text:y.content},D={showTitle:!1,showTagUrlSlug:!1}),(0,h.jsxs)(s.A,{children:[(0,h.jsx)(s.A.Header,{children:t("suggest_edits")}),(0,h.jsxs)(s.A.Body,{className:"p-0",children:[(0,h.jsxs)(l.A,{variant:"info",className:"border-0 rounded-0 mb-0",children:[(0,h.jsxs)(a.A,{direction:"horizontal",gap:1,className:"align-items-center mb-2",children:[(0,h.jsx)(c.fZ,{data:L,avatarSize:"24",avatarClass:"me-2"}),P&&(0,h.jsx)(c.H0,{time:P,className:"small text-secondary",preFix:t("proposed")})]}),(0,h.jsx)(a.A,{className:"align-items-start",children:(0,h.jsx)("p",{className:"mb-0",children:q})})]}),(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsxs)("small",{className:"d-block text-secondary mb-4",children:[(0,h.jsxs)("span",{children:[t(k,{keyPrefix:"btns"})," "]}),(0,h.jsxs)(r.N_,{to:C,target:"_blank",className:"link-secondary",children:["#",S]})]}),(0,h.jsx)(c.V$,{className:"mt-2",objectType:k,newData:z,oldData:B,opts:D})]})]}),(0,h.jsxs)(s.A.Footer,{className:"p-3",children:[(0,h.jsx)("p",{children:t("approve_revision_tip")}),(0,h.jsxs)(a.A,{direction:"horizontal",gap:2,children:[(0,h.jsx)(o.A,{variant:"outline-primary",disabled:i,onClick:()=>{A&&(x(!0),(0,u.LG)(A.id,"approve").then((()=>{e(),N(m)})).finally((()=>{x(!1)})))},children:t("approve",{keyPrefix:"btns"})}),(0,h.jsx)(o.A,{variant:"outline-primary",disabled:i,onClick:()=>{A&&(x(!0),(0,u.LG)(A.id,"reject").then((()=>{e(),N(m)})).catch((e=>{console.error("revisionAudit reject error: ",e)})).finally((()=>{x(!1)})))},children:t("reject",{keyPrefix:"btns"})}),(0,h.jsx)(o.A,{variant:"outline-primary",disabled:i,onClick:()=>{N(m+1)},children:t("skip",{keyPrefix:"btns"})})]})]})]})}}}]);
//# sourceMappingURL=3840.030ab822.chunk.js.map