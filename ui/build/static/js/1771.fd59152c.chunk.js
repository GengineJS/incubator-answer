"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1771,6174],{1771:(e,n,i)=>{i.r(n),i.d(n,{default:()=>h});var t=i(28915),l=i(16413),a=i(51588),o=i(18596),s=i(72475),r=i(24978),c=i(4440),d=i(76812),u=i(86174),g=i(68179);let m;const v=()=>{var e;const{t:n}=(0,a.B)("translation",{keyPrefix:"user_center"}),i=(0,o.Zp)(),v=(0,r.ym)().agent,h=(null===v||void 0===v||null===(e=v.agent_info)||void 0===e?void 0:e.name)||"",[x,_]=(0,t.useState)(""),k=e=>{e&&(0,u.checkLoginResult)(e).then((n=>{n.is_login?c.ah.handleLoginWithToken(n.token,i):(clearTimeout(m),m=setTimeout((()=>{k(e)}),2e3))}))};var f,p;return(0,t.useEffect)((()=>{h&&(0,u.getLoginConf)().then((e=>{var n;(0,c.x4)()===d.dH.WeCom?c.Jg.navigate(null===e||void 0===e?void 0:e.redirect_url,{handler:"replace"}):((n=null===e||void 0===e?void 0:e.redirect_url)&&s.toDataURL(n,{width:240,margin:0},((e,n)=>{e||_(n)})),k(null===e||void 0===e?void 0:e.key))}))}),[h]),(0,t.useEffect)((()=>()=>{clearTimeout(m)}),[]),(0,c.x4)()!==d.dH.WeCom?(0,g.jsx)(l.A,{className:"text-center",children:(0,g.jsxs)(l.A.Body,{children:[(0,g.jsxs)(l.A.Title,{as:"h3",className:"mb-3",children:[null===v||void 0===v||null===(f=v.agent_info)||void 0===f?void 0:f.display_name," ",n("login")]}),x?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{className:"w-100",style:{maxWidth:"240px"},src:x,alt:h}),(0,g.jsx)("div",{className:"text-secondary mt-3",children:n("qrcode_login_tip",{agentName:null===v||void 0===v||null===(p=v.agent_info)||void 0===p?void 0:p.display_name})})]}):null]})}):null},h=(0,t.memo)(v)},86174:(e,n,i)=>{i.r(n),i.d(n,{checkLoginResult:()=>a,getLoginConf:()=>l});var t=i(48764);const l=()=>t.A.get("/answer/api/v1/wecom/login/url"),a=e=>{const n=`/answer/api/v1/wecom/login/check?key=${e}`;return t.A.get(n)}}}]);
//# sourceMappingURL=1771.fd59152c.chunk.js.map