"use strict";(globalThis.webpackChunkanswer_static=globalThis.webpackChunkanswer_static||[]).push([[1562,1771,6174],{1771:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var a=t(28915),l=t(16413),i=t(51588),o=t(18596),s=t(72475),r=t(24978),d=t(4440),c=t(76812),m=t(86174),u=t(68179);let g;const v=()=>{var e;const{t:n}=(0,i.B)("translation",{keyPrefix:"user_center"}),t=(0,o.Zp)(),v=(0,r.ym)().agent,h=(null===v||void 0===v||null===(e=v.agent_info)||void 0===e?void 0:e.name)||"",[x,_]=(0,a.useState)(""),f=e=>{e&&(0,m.checkLoginResult)(e).then((n=>{n.is_login?d.ah.handleLoginWithToken(n.token,t):(clearTimeout(g),g=setTimeout((()=>{f(e)}),2e3))}))};var p,k;return(0,a.useEffect)((()=>{h&&(0,m.getLoginConf)().then((e=>{var n;(0,d.x4)()===c.dH.WeCom?d.Jg.navigate(null===e||void 0===e?void 0:e.redirect_url,{handler:"replace"}):((n=null===e||void 0===e?void 0:e.redirect_url)&&s.toDataURL(n,{width:240,margin:0},((e,n)=>{e||_(n)})),f(null===e||void 0===e?void 0:e.key))}))}),[h]),(0,a.useEffect)((()=>()=>{clearTimeout(g)}),[]),(0,d.x4)()!==c.dH.WeCom?(0,u.jsx)(l.A,{className:"text-center",children:(0,u.jsxs)(l.A.Body,{children:[(0,u.jsxs)(l.A.Title,{as:"h3",className:"mb-3",children:[null===v||void 0===v||null===(p=v.agent_info)||void 0===p?void 0:p.display_name," ",n("login")]}),x?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{className:"w-100",style:{maxWidth:"240px"},src:x,alt:h}),(0,u.jsx)("div",{className:"text-secondary mt-3",children:n("qrcode_login_tip",{agentName:null===v||void 0===v||null===(k=v.agent_info)||void 0===k?void 0:k.display_name})})]}):null]})}):null},h=(0,a.memo)(v)},86174:(e,n,t)=>{t.r(n),t.d(n,{checkLoginResult:()=>i,getLoginConf:()=>l});var a=t(48764);const l=()=>a.A.get("/answer/api/v1/wecom/login/url"),i=e=>{const n=`/answer/api/v1/wecom/login/check?key=${e}`;return a.A.get(n)}},21562:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var a=t(28915),l=t(47760),i=t(98329),o=t(65200),s=t(51588),r=t(24978),d=t(76812),c=t(47185),m=t(1771),u=t(68179);const g=()=>{var e;const{t:n}=(0,s.B)("translation"),[t]=(0,o.ok)(),{agent:a}=(0,r.ym)();let g=(null===a||void 0===a||null===(e=a.agent_info)||void 0===e?void 0:e.name)||"";return t.get("agent_name")&&(g=t.get("agent_name")||""),(0,c.M4)({title:n("login",{keyPrefix:"page_title"})}),(0,u.jsx)(l.A,{style:{paddingTop:"5rem",paddingBottom:"5rem"},children:(0,u.jsx)(i.A,{md:4,className:"mx-auto",children:d.dH.WeCom.toLowerCase()===g.toLowerCase()?(0,u.jsx)(m.default,{}):null})})},v=(0,a.memo)(g)}}]);
//# sourceMappingURL=1562.1697b7e4.chunk.js.map