{"version":3,"file":"static/js/5548.36a88a2b.chunk.js","mappings":"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","sources":["pages/Tags/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useState } from 'react';\nimport { Row, Col, Card, Button, Form, Stack } from 'react-bootstrap';\nimport { useSearchParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nimport { usePageTags, useSkeletonControl } from '@/hooks';\nimport { Tag, Pagination, QueryGroup, TagsLoader } from '@/components';\nimport { formatCount, escapeRemove } from '@/utils';\nimport { tryNormalLogged } from '@/utils/guard';\nimport { useQueryTags, following } from '@/services';\nimport { loggedUserInfoStore } from '@/stores';\n\nconst sortBtns = ['popular', 'name', 'newest'];\n\nconst Tags = () => {\n  const [urlSearch] = useSearchParams();\n  const { t } = useTranslation('translation', { keyPrefix: 'tags' });\n  const [searchTag, setSearchTag] = useState('');\n  const { role_id } = loggedUserInfoStore((_) => _.user);\n\n  const page = Number(urlSearch.get('page')) || 1;\n  const sort = urlSearch.get('sort') || sortBtns[0];\n\n  const pageSize = 20;\n  const {\n    data: tags,\n    mutate,\n    isLoading,\n  } = useQueryTags({\n    page,\n    page_size: pageSize,\n    ...(searchTag ? { slug_name: searchTag } : {}),\n    ...(sort ? { query_cond: sort } : {}),\n  });\n\n  const { isSkeletonShow } = useSkeletonControl(isLoading);\n\n  const handleChange = (e) => {\n    setSearchTag(e.target.value);\n  };\n\n  const handleFollow = (tag) => {\n    if (!tryNormalLogged(true)) {\n      return;\n    }\n    following({\n      object_id: tag.tag_id,\n      is_cancel: tag.is_follower,\n    }).then(() => {\n      mutate();\n    });\n  };\n\n  usePageTags({\n    title: t('tags', { keyPrefix: 'page_title' }),\n  });\n\n  return (\n    <Row className=\"py-4 mb-4\">\n      <Col xxl={12}>\n        <h3 className=\"mb-4\">{t('title')}</h3>\n        <div className=\"d-block d-sm-flex justify-content-between align-items-center flex-wrap\">\n          <Stack direction=\"horizontal\" gap={3} className=\"mb-3 mb-sm-0\">\n            <Form>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Control\n                  value={searchTag}\n                  placeholder={t('search_placeholder')}\n                  type=\"search\"\n                  onChange={handleChange}\n                  size=\"sm\"\n                />\n              </Form.Group>\n            </Form>\n            {role_id === 2 || role_id === 3 ? (\n              <Link\n                className=\"btn btn-outline-primary btn-sm\"\n                to=\"/tags/create\">\n                {t('title', { keyPrefix: 'tag_modal' })}\n              </Link>\n            ) : null}\n          </Stack>\n          <QueryGroup\n            data={sortBtns}\n            currentSort={sort || 'popular'}\n            sortKey=\"sort\"\n            i18nKeyPrefix=\"tags.sort_buttons\"\n          />\n        </div>\n      </Col>\n\n      <Col className=\"mt-4\" xxl={12}>\n        <Row>\n          {isSkeletonShow ? (\n            <TagsLoader />\n          ) : (\n            tags?.list?.map((tag) => (\n              <Col\n                key={tag.slug_name}\n                xl={3}\n                lg={4}\n                md={4}\n                sm={6}\n                xs={12}\n                className=\"mb-4\">\n                <Card className=\"h-100\">\n                  <Card.Body className=\"d-flex flex-column align-items-start\">\n                    <Tag className=\"mb-3\" data={tag} />\n\n                    <div className=\"small flex-fill text-break text-wrap text-truncate-3 reset-p mb-3\">\n                      {escapeRemove(tag.excerpt)}\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                      <Button\n                        className={`me-2 ${tag.is_follower ? 'active' : ''}`}\n                        variant=\"outline-primary\"\n                        size=\"sm\"\n                        onClick={() => handleFollow(tag)}>\n                        {tag.is_follower\n                          ? t('button_following')\n                          : t('button_follow')}\n                      </Button>\n                      <span className=\"text-secondary small text-nowrap\">\n                        {formatCount(tag.question_count)} {t('tag_label')}\n                      </span>\n                    </div>\n                  </Card.Body>\n                </Card>\n              </Col>\n            ))\n          )}\n        </Row>\n        <div className=\"d-flex justify-content-center\">\n          <Pagination\n            currentPage={page}\n            totalSize={tags?.count || 0}\n            pageSize={pageSize}\n          />\n        </div>\n      </Col>\n    </Row>\n  );\n};\n\nexport default Tags;\n"],"names":["sortBtns","Tags","_tags$list","urlSearch","useSearchParams","t","useTranslation","keyPrefix","searchTag","setSearchTag","useState","role_id","loggedUserInfoStore","_","user","page","Number","get","sort","data","tags","mutate","isLoading","useQueryTags","page_size","slug_name","query_cond","isSkeletonShow","useSkeletonControl","usePageTags","title","_jsxs","Row","className","children","Col","xxl","_jsx","Stack","direction","gap","Form","Group","controlId","Control","value","placeholder","type","onChange","e","target","size","Link","to","QueryGroup","currentSort","sortKey","i18nKeyPrefix","TagsLoader","list","map","tag","xl","lg","md","sm","xs","Card","Body","Tag","escapeRemove","excerpt","Button","is_follower","variant","onClick","tryNormalLogged","following","object_id","tag_id","is_cancel","then","handleFollow","formatCount","question_count","Pagination","currentPage","totalSize","count","pageSize"],"sourceRoot":""}