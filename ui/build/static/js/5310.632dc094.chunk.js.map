{"version":3,"file":"static/js/5310.632dc094.chunk.js","mappings":"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","sources":["pages/Admin/Plugins/Installed/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC } from 'react';\nimport { Table, Dropdown, Stack } from 'react-bootstrap';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport { useTranslation, Trans } from 'react-i18next';\n\nimport classNames from 'classnames';\n\nimport { Empty, QueryGroup, Icon } from '@/components';\nimport * as Type from '@/common/interface';\nimport { useQueryPlugins, updatePluginStatus } from '@/services';\nimport PluginKit from '@/utils/pluginKit';\n\nconst InstalledPluginsFilterKeys: Type.InstalledPluginsFilterBy[] = [\n  'all',\n  'active',\n  'inactive',\n];\n\nconst bgMap = {\n  active: 'text-bg-success',\n  inactive: 'text-bg-secondary',\n};\n\nconst Users: FC = () => {\n  const { t } = useTranslation('translation', {\n    keyPrefix: 'admin.installed_plugins',\n  });\n  const navigate = useNavigate();\n  const [urlSearchParams] = useSearchParams();\n  const curFilter =\n    urlSearchParams.get('filter') || InstalledPluginsFilterKeys[0];\n  const {\n    data,\n    isLoading,\n    mutate: updatePlugins,\n  } = useQueryPlugins({\n    status: curFilter === 'all' ? undefined : curFilter,\n  });\n  const emitPluginChange = (type) => {\n    window.postMessage({\n      msgType: type,\n    });\n  };\n  const handleStatus = (plugin) => {\n    updatePluginStatus({\n      enabled: !plugin.enabled,\n      plugin_slug_name: plugin.slug_name,\n    }).then(() => {\n      updatePlugins();\n      PluginKit.changePluginActiveStatus(plugin.slug_name, !plugin.enabled);\n      if (plugin.have_config) {\n        emitPluginChange('refreshConfigurablePlugins');\n      }\n    });\n  };\n  const handleSettings = (plugin) => {\n    const url = `/admin/${plugin.slug_name}`;\n    navigate(url);\n  };\n\n  return (\n    <>\n      <h3>{t('title')}</h3>\n      <div className=\"mb-4\">\n        <Trans i18nKey=\"admin.installed_plugins.plugin_link\">\n          Plugins extend and expand the functionality of Answer. You may find\n          plugins in the\n          <a\n            href=\"https://github.com/apache/incubator-answer-plugins\"\n            target=\"_blank\"\n            rel=\"noreferrer\">\n            Answer Plugin Repository\n          </a>\n          .\n        </Trans>\n      </div>\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <Stack direction=\"horizontal\" gap={3}>\n          <QueryGroup\n            data={InstalledPluginsFilterKeys}\n            currentSort={curFilter}\n            sortKey=\"filter\"\n            i18nKeyPrefix=\"admin.installed_plugins.filter\"\n          />\n        </Stack>\n      </div>\n      <Table responsive>\n        <thead>\n          <tr>\n            <th className=\"min-w-15\">{t('name')}</th>\n            <th style={{ width: '17%' }}>{t('version')}</th>\n            <th style={{ width: '11%' }}>{t('status')}</th>\n            {curFilter !== 'deleted' ? (\n              <th style={{ width: '11%' }} className=\"text-end\">\n                {t('action')}\n              </th>\n            ) : null}\n          </tr>\n        </thead>\n        <tbody className=\"align-middle\">\n          {data?.map((plugin) => {\n            return (\n              <tr key={plugin.slug_name}>\n                <td>\n                  <div>\n                    {plugin.link ? (\n                      <a href={plugin.link} target=\"_blank\" rel=\"noreferrer\">\n                        {plugin.name}\n                      </a>\n                    ) : (\n                      plugin.name\n                    )}\n                  </div>\n                  <div className=\"small\">{plugin.description}</div>\n                </td>\n                <td className=\"text-break\">{plugin.version}</td>\n                <td>\n                  <span\n                    className={classNames(\n                      'badge',\n                      bgMap[plugin.enabled ? 'active' : 'inactive'],\n                    )}>\n                    {t(`filter.${plugin.enabled ? 'active' : 'inactive'}`)}\n                  </span>\n                </td>\n                {curFilter !== 'deleted' ? (\n                  <td className=\"text-end\">\n                    <Dropdown>\n                      <Dropdown.Toggle variant=\"link\" className=\"no-toggle\">\n                        <Icon name=\"three-dots-vertical\" title={t('action')} />\n                      </Dropdown.Toggle>\n                      <Dropdown.Menu>\n                        {plugin.enabled ? (\n                          <Dropdown.Item onClick={() => handleStatus(plugin)}>\n                            {t('deactivate')}\n                          </Dropdown.Item>\n                        ) : (\n                          <Dropdown.Item onClick={() => handleStatus(plugin)}>\n                            {t('activate')}\n                          </Dropdown.Item>\n                        )}\n                        {plugin.enabled && plugin.have_config && (\n                          <Dropdown.Item onClick={() => handleSettings(plugin)}>\n                            {t('settings')}\n                          </Dropdown.Item>\n                        )}\n                      </Dropdown.Menu>\n                    </Dropdown>\n                  </td>\n                ) : null}\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n      {Number(data?.length) <= 0 && !isLoading && <Empty />}\n    </>\n  );\n};\n\nexport default Users;\n"],"names":["InstalledPluginsFilterKeys","bgMap","active","inactive","Users","t","useTranslation","keyPrefix","navigate","useNavigate","urlSearchParams","useSearchParams","curFilter","get","data","isLoading","mutate","updatePlugins","useQueryPlugins","status","undefined","handleStatus","plugin","updatePluginStatus","enabled","plugin_slug_name","slug_name","then","type","PluginKit","changePluginActiveStatus","have_config","window","postMessage","msgType","_jsxs","_Fragment","children","_jsx","className","Trans","i18nKey","href","target","rel","Stack","direction","gap","QueryGroup","currentSort","sortKey","i18nKeyPrefix","Table","responsive","style","width","map","link","name","description","version","classNames","Dropdown","Toggle","variant","Icon","title","Menu","Item","onClick","url","handleSettings","Number","length","Empty"],"sourceRoot":""}