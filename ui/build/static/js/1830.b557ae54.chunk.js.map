{"version":3,"file":"static/js/1830.b557ae54.chunk.js","mappings":"gQA6BA,MAAMA,EAAYA,KAChBC,EAAAA,GAAcC,aACd,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,GAAe,cAAe,CAAEC,UAAW,gBAClDC,IAAgBC,EAAAA,EAAAA,MACjBC,GAAaC,EAAAA,EAAAA,KAAqBC,GAAUA,EAAMC,SAClDC,GAAWC,EAAAA,EAAAA,MA8BjB,OA7BAC,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAOT,EAAaU,IAAI,QACxBC,EAAyC,MAAlCX,EAAaU,IAAI,aACxBE,EAAa,oCACfH,GACFI,EAAAA,EAAAA,IAAgBC,mBAAmBL,IAAOM,MAAMC,IAC9Cd,EAAWc,GACXrB,EAAAA,GAAcsB,QACZ,CACEC,MAAOF,EAAIG,OACXC,SAAUJ,EAAIK,MACdC,KAAMC,EAAAA,GAAcC,QAEtB,KACEC,YAAW,KACTnB,EAASK,EAAO,GAAGC,gBAA2BA,EAAY,CACxDc,SAAS,GACT,GACD,EAAE,GAER,IAGHpB,EAAS,IAAK,CAAEoB,SAAS,GAC3B,GACC,KACHC,EAAAA,EAAAA,IAAY,CACVC,MAAO/B,EAAE,wBAEJ,IAAI,EAGb,GAAegC,EAAAA,EAAAA,MAAKnC,E","sources":["pages/Users/ActiveEmail/index.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { FC, memo, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\n\nimport { usePageTags } from '@/hooks';\nimport { loggedUserInfoStore } from '@/stores';\nimport { activateAccount } from '@/services';\nimport { iframeManager } from '@/common/functions';\nimport { IframeMsgType } from '@/common/constants';\n\nconst Index: FC = () => {\n  iframeManager.initIframe();\n  const { t } = useTranslation('translation', { keyPrefix: 'page_title' });\n  const [searchParams] = useSearchParams();\n  const updateUser = loggedUserInfoStore((state) => state.update);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const code = searchParams.get('code');\n    const isAB = searchParams.get('page_type') === '1';\n    const successUrl = `/users/account-activation/success`;\n    if (code) {\n      activateAccount(encodeURIComponent(code)).then((res) => {\n        updateUser(res);\n        iframeManager.postMsg(\n          {\n            email: res.e_mail,\n            password: res.plain,\n            type: IframeMsgType.LOGIN,\n          },\n          () => {\n            setTimeout(() => {\n              navigate(isAB ? `${successUrl}?page_type=1` : successUrl, {\n                replace: true,\n              });\n            }, 0);\n          },\n        );\n      });\n    } else {\n      navigate('/', { replace: true });\n    }\n  }, []);\n  usePageTags({\n    title: t('account_activation'),\n  });\n  return null;\n};\n\nexport default memo(Index);\n"],"names":["Index","iframeManager","initIframe","t","useTranslation","keyPrefix","searchParams","useSearchParams","updateUser","loggedUserInfoStore","state","update","navigate","useNavigate","useEffect","code","get","isAB","successUrl","activateAccount","encodeURIComponent","then","res","postMsg","email","e_mail","password","plain","type","IframeMsgType","LOGIN","setTimeout","replace","usePageTags","title","memo"],"sourceRoot":""}